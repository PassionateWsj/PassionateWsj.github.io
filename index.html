<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="简单即快乐。">
<meta property="og:type" content="website">
<meta property="og:title" content="JamesWong&#39;s Notes">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="JamesWong&#39;s Notes">
<meta property="og:description" content="简单即快乐。">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JamesWong&#39;s Notes">
<meta name="twitter:description" content="简单即快乐。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>JamesWong's Notes</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">JamesWong's Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/16/数据库设计/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JamesWong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JamesWong's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/16/数据库设计/" itemprop="url">数据库设计</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-16T11:45:46+08:00">
                2019-04-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="数据库设计过程"><a href="#数据库设计过程" class="headerlink" title="数据库设计过程"></a>数据库设计过程</h2><p><img src="/img/203fb80e7bec54e7eefc876cb9389b504fc26ab4.jpg" alt=""></p>
<ol>
<li>需求分析：数据流图、数据字典、需求说明书</li>
<li>概念设计：形成独立于具体 DBMS 的 E-R 模型</li>
<li>逻辑设计：将 E-R 图转为 DBMS 所支持的数据模型（关系模式）</li>
<li>物理设计：选取存储结构和存取方法</li>
<li>数据库实施</li>
<li>数据库运行和维护</li>
</ol>
<h2 id="E-R-图"><a href="#E-R-图" class="headerlink" title="E-R 图"></a>E-R 图</h2><p>ER 即 Entity-Relationship ，有三个组成部分：实体、属性、联系</p>
<p><strong>实体（entity）</strong>即数据对象，用长方形</p>
<p><strong>属性（attribute）</strong>即数据对象具有的属性，用椭圆形</p>
<p><strong>联系（relationship）</strong>对数据象与数据对象之间的关系，用菱形</p>
<h3 id="实体间联系类型"><a href="#实体间联系类型" class="headerlink" title="实体间联系类型"></a>实体间联系类型</h3><p>有<code>1:1</code>、<code>1:n</code>、<code>n:m</code>三种，分别表示一对一、一对多、多对多</p>
<h3 id="E-R-图转成关系模型"><a href="#E-R-图转成关系模型" class="headerlink" title="E-R 图转成关系模型"></a>E-R 图转成关系模型</h3><h5 id="实体类型转换"><a href="#实体类型转换" class="headerlink" title="实体类型转换"></a>实体类型转换</h5><ol>
<li>将每个实体转成关系模式</li>
<li>实体的属性转为关系模式的属性</li>
<li>实体的唯一标识，转成关系模式的键</li>
</ol>
<h5 id="联系的转换"><a href="#联系的转换" class="headerlink" title="联系的转换"></a>联系的转换</h5><p><strong>1 : 1</strong> 的联系，在任意一个关系模式中，加入另一个的键、联系的属性</p>
<p><strong>1 : n</strong> 的联系，在 n 的关系模式中，加入 1 的键、联系的属性</p>
<p><strong>n : m</strong> 的联系，将联系类型也转成关系模式，并且属性为两端的键、联系的属性。这个关系模式的键为两端实体键的组合</p>
<p><strong>实例</strong>：</p>
<p><img src="/img/20150728110504289.png" alt=""></p>
<ol>
<li>实体转关系模式并附上<strong>属性</strong>及<strong>主键</strong>：<ul>
<li>系（<u>系编号</u>，系名，电话）</li>
<li>教师（<u>教工号</u>，姓名，性别，职称）</li>
<li>课程（<u>课程号</u>，课程名，学分）</li>
</ul>
</li>
<li>根据联系添加<strong>属性</strong>（1:1、1:n）<ul>
<li>系（<u>系编号</u>，系名，电话，主管教工号）</li>
<li>教师（<u>教工号</u>，姓名，性别，职称，所属系，聘期）</li>
<li>课程（<u>课程号</u>，课程名，学分，开设系）</li>
</ul>
</li>
<li>添加<strong>关系模型</strong>（n:m）<ul>
<li>任教（<u>教工号</u>，<u>课程号</u>，教材）</li>
</ul>
</li>
<li>最终<ul>
<li>系（<u>系编号</u>，系名，电话，主管教工号）</li>
<li>教师（<u>教工号</u>，姓名，性别，职称，所属系，聘期）</li>
<li>课程（<u>课程号</u>，课程名，学分，开设系）</li>
<li>任教（<u>教工号</u>，<u>课程号</u>，教材）</li>
</ul>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/16/UML-图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JamesWong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JamesWong's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/16/UML-图/" itemprop="url">UML</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-16T08:45:46+08:00">
                2019-04-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>统一建模语言（Unified Modeling Language，UML） 是描述、构造和文档化系统的可视化语言</p>
<p>UML 是一个庞大的图形化表示法体系</p>
<h2 id="关系"><a href="#关系" class="headerlink" title="关系"></a>关系</h2><p>依赖、关联（聚合、组合）、泛化、实现</p>
<h2 id="图"><a href="#图" class="headerlink" title="图"></a>图</h2><p><strong>静态建模</strong></p>
<ul>
<li>类图</li>
</ul>
<p><strong>动态家建模</strong></p>
<ul>
<li>顺序图(协作图)</li>
<li>用例图</li>
<li>活动图</li>
<li>状态图</li>
</ul>
<h3 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h3><ul>
<li>类名，方法名，属性名</li>
<li>多重度：<code>1、0..*、1..*、*</code></li>
<li><p>关系</p>
<p>  <strong>例：</strong>神州六号飞船是神州飞船系列的一种，它由轨道舱、返回舱、推进舱和逃逸救生塔等组成;航天员可以在返回舱内驾驶飞船，轨道仓则是航天员工作和休息的场所。在紧急的情况下，可以利用逃逸救生塔逃生。在飞船两侧有多个太阳能电池翼，可以为飞船提供电能;画出相应 UML 图</p>
<p>  <img src="/img/WX20190416-182537.png" alt=""></p>
</li>
</ul>
<p><img src="/img/WX20190416-151250.png" alt="接口"><img src="/img/WX20190416-150951.png" alt=""></p>
<p><img src="/img/WX20190416-145421.png" alt="结构"></p>
<h3 id="顺序图、协作图"><a href="#顺序图、协作图" class="headerlink" title="顺序图、协作图"></a>顺序图、协作图</h3><p><center>掷骰子</center><img src="/img/WX20190416-143140.png" alt="掷骰子"></p>
<p><center>登录</center><img src="/img/WX20190416-183437.png" alt="登录"></p>
<p><center>添加用户</center><img src="/img/WX20190416-183943.png" alt="添加用户"></p>
<p><center>发送消息顺序图</center><img src="/img/WX20190416-185417.png" alt="发送消息顺序图"></p>
<p><center>发送消息协作图</center><img src="/img/WechatIMG255.jpeg" alt="发送消息协作图"></p>
<h3 id="用例图"><a href="#用例图" class="headerlink" title="用例图"></a>用例图</h3><p><img src="/img/WX20190416-190530.png" alt=""></p>
<p><img src="/img/WX20190416-145804.png" alt=""></p>
<h5 id="用例关系"><a href="#用例关系" class="headerlink" title="用例关系"></a>用例关系</h5><ol>
<li><strong>包含关系</strong><code>&lt;&lt;include&gt;&gt;</code>：用例必然会被其他用例使用到</li>
<li><strong>扩展关系</strong><code>&lt;&lt;extend&gt;&gt;</code>：比如查询之后的修改，可选，不是必须</li>
</ol>
<h3 id="活动图"><a href="#活动图" class="headerlink" title="活动图"></a>活动图</h3><p><img src="/img/WX20190416-145813.png" alt=""><br><img src="/img/WX20190416-195001.png" alt=""></p>
<h3 id="状态图"><a href="#状态图" class="headerlink" title="状态图"></a>状态图</h3><p>用来描述一个特定对象所有可能的状态，已经由各种事件引起的状态变化</p>
<p><img src="/img/WX20190416-190249.png" alt=""></p>
<p><img src="/img/WX20190416-145756.png" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/15/计算机基础知识/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JamesWong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JamesWong's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/15/计算机基础知识/" itemprop="url">计算机基础知识</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-15T10:05:46+08:00">
                2019-04-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="计算机硬件"><a href="#计算机硬件" class="headerlink" title="计算机硬件"></a>计算机硬件</h3><ol>
<li>冯诺依曼计算机的体系结构分为五大部分：控制器、运算器、存储器、输入和输出设备</li>
<li>计算机总线分为：地址总线、控制总线、数据总线。计算机五大部分通过总线连接成一个整体。</li>
<li>PCI 总线独立于 CPU 总线，可以与 CPU 总线并行操作</li>
<li>MIPS 是每秒处理的百万级的机器语言指令数，这是衡量 CPU 速度的重要指标</li>
<li>主板上最重要的构成组件是芯片组，分为南桥、北桥，两者都是超大规模集成芯片组<ul>
<li>南桥（系统I/O芯片）：主要管理中低速外部设备；集成中断控制器、DMA 控制器(Direct Memory Access，直接内存存取，其允许不同速度的硬件装置互相沟通，而不需要依赖于CPU的大量中断负载) 。</li>
<li>北桥（系统控制芯片）：主要负责CPU与内存、CPU与PCI-E之间的通信。掌控项目多为高速设备，如：CPU、Host Bus。后期北桥集成内存控制器、Cache高速控制器；</li>
</ul>
</li>
<li>访问速度：寄存器&gt;Cache&gt;内存&gt;硬盘</li>
<li>控制器、运算器、存储器主要作用<ul>
<li>控制器：分析指令，控制部件完成任务（协调、指挥各部件的中枢）。由指令寄存器、状态寄存器、指令译码器、时序电路和控制电路组成</li>
<li>运算器（算数逻辑单元）：进行算数、逻辑运算。主要是对数据加工处理</li>
<li>存储器：记忆、暂存数据。包括原始输入数据、经初步加工的中间数据、处理完成的有用信息、处理方式的指令</li>
</ul>
</li>
<li>调制解调器（ Modem ），俗称 “猫”，因电话线传送的是模拟信号，计算机无法识别，需要做模拟信号和数字信号之间的相互转换。调制即“ 数 –&gt; 模 ”，解调即“ 模 –&gt; 数 ”</li>
</ol>
<h3 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h3><h4 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h4><ol>
<li>五层协议<ul>
<li>应用层（报文）：为特定应用程序提供数据传输服务，例如 HTTP、DNS 等协议。</li>
<li>传输层（ TCP 报文段或 UDP 用户数据报）：为进程提供通用数据传输服务。由于应用层协议很多，定义通用的传输层协议就可以支持不断增多的应用层协议。运输层包括两种协议：传输控制协议 TCP，提供面向连接、可靠的数据传输服务，数据单位为报文段；用户数据报协议 UDP，提供无连接、尽最大努力的数据传输服务，数据单位为用户数据报。TCP 主要提供完整性服务，UDP 主要提供及时性服务</li>
<li>网络层（ IP 数据报或分组）：异构网络互联、路由与转发</li>
<li>数据链路层（帧）：封装成帧、差错检测、透明传输</li>
<li>物理层（比特流）：考虑的是怎样在传输媒体上传输数据比特流，而不是指具体的传输媒体。物理层的作用是尽可能屏蔽传输媒体和通信手段的差异，使数据链路层感觉不到这些差异</li>
</ul>
</li>
<li>OSI 还有表示层和会话层</li>
<li>TCP/IP 网络协议<ul>
<li>应用层</li>
<li>传输层</li>
<li>互联网层</li>
<li>网络访问层</li>
</ul>
</li>
<li>分组交换（包交换）会将通信数据分成等长数据段，首部加上控制信息，其特点<ul>
<li>信息传送最小单位为分组：分组由组头和用户信息组成，分组头含有选路和控制信息</li>
<li>统计时分复用：动态分配带宽</li>
<li>不透明：需要对信息处理，如拆分、重组</li>
<li>差错检测：可靠性要求高，实时性不高，由CRC校验、重发等</li>
<li>流量控制：流量大时排队</li>
</ul>
</li>
<li>ARP（地址解析协议 Address Resolution Protocol）负责将某个IP地址解析成对应的MAC地址。</li>
<li>ARP攻击就是通过伪造IP地址和MAC地址实现ARP欺骗。仅能在局域网，不能对外网进行</li>
</ol>
<h4 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h4><p>域名是有两组或两组以上的ASCII或各国语言字符构成，各字符间用点分开最右边为顶级域名或一级域名、倒数第二为二级域名、倒数第三为三级域名</p>
<p>还分为三类：</p>
<ul>
<li>国家或地区：cn (中国)、jp (日本)等；</li>
<li>通用顶级域名：com（企业）、net（网络提供商）、org（非盈利组织）等；</li>
<li>新顶级域名：xyz（通用）、top（“高端”）、red（“红色”）、men（“人”）等</li>
</ul>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><ol>
<li>ISP（Internet Service Provider）：互联网服务提供商，即向广大用户综合提供互联网接入业务、信息业务和增值业务的电信运营商</li>
<li>地址分类<ul>
<li>A类（适用大型网络）：1-127，私有 10.0.0.0-10.255.255.255</li>
<li>B类（适用中型网络）：128-191，私有 172.16.0.0-172.31.255.255</li>
<li>C类（适用小型网络）：192-223，私有 192.168.0.0-192.168.255.255</li>
<li>D类（特殊）：224-239</li>
<li>E类（特殊）：240-255</li>
</ul>
</li>
<li>虚拟局域网可以在网路体系结构上实现交换机端口、MAC 地址、网络层地址和 IP 广播组</li>
<li>计算机网络面临的主要威胁：<ul>
<li>黑客恶意攻击</li>
<li>网络自身和管理缺陷</li>
<li>软件设计漏洞和“后门”</li>
<li>恶意网站陷阱</li>
<li>用户网络内部工作人员不良行为引起的安全问题</li>
<li>认为误接收病毒文件</li>
</ul>
</li>
</ol>
<h3 id="计算机系统"><a href="#计算机系统" class="headerlink" title="计算机系统"></a>计算机系统</h3><ol>
<li>操作系统五大功能模块<ul>
<li>处理器管理：当多个程序同时运行，简介 CPU 时间分配问题</li>
<li>作业管理：提供计算机界面，方便作业</li>
<li>存储器管理：为数据分配内存，保证互不干扰</li>
<li>设备管理：为用户分配设备，接收设备中断</li>
<li>文件管理：存储、检索、共享和保护文件</li>
</ul>
</li>
<li>伪指令是用于告诉汇编程序如何进行汇编的指令</li>
<li><p>磁盘文件采用树形目录结构优点：</p>
<ul>
<li>解决重名问题</li>
<li>利于文件分类，便于查找和管理</li>
<li>缩短搜索路径，提高搜索速度</li>
</ul>
</li>
<li><p>机器指令由操作码和地址码组成</p>
</li>
<li>有符号数分三种表示法：原码、反码（负数时，符号位不变，其他取反）、补码（负数时，符号位不变，其他取反再加1）</li>
<li>机器语言、汇编语言、高级语言<ul>
<li>机器语言：被计算机直接识别、执行。执行速度快、占内存少，但对于开发者编写、识别、记忆都难。</li>
<li>汇编语言：是面向机器的低级语言。需要编译，机器才能识别。保持机器语言优点，直接、简洁、占用少、执行快，但可移植性差。</li>
<li>高级语言：可维护性好、可移植性好、灵活、易懂、易学、容易编写出结构紧凑、复杂的程序，但执行速度低、对硬件可控性弱。需要编译计算机才可识别</li>
</ul>
</li>
</ol>
<h3 id="计算机软件"><a href="#计算机软件" class="headerlink" title="计算机软件"></a>计算机软件</h3><ol>
<li>软件危机主要表现：<ul>
<li>无法满足需求增长</li>
<li>开发成本、进度不可控</li>
<li>质量不行</li>
<li>可维护性差</li>
<li>开发生产速率不及硬件发展和需求增长速率</li>
</ul>
</li>
<li>线性表中顺序存储和链式存储<ul>
<li>顺序存储：内存地址连续，节约空间，支持随机存取，方便操作，适用于频繁查询</li>
<li>链式存储：内存地址不一定连续，适用于在较频繁地插入、删除、更新元素</li>
</ul>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/14/Android-与-Flutter-一/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JamesWong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JamesWong's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/14/Android-与-Flutter-一/" itemprop="url">Android 与 Flutter (一)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-14T23:06:45+08:00">
                2018-03-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Views"><a href="#Views" class="headerlink" title="Views"></a>Views</h3><ol>
<li>Q : 在 Flutter 中与 View 等同的是啥？<ul>
<li>Android : 如 Buttons, Toolbars, Inputs，总之什么都是一个 View</li>
<li>Flutter : Widget</li>
<li>Q : But 区别又是啥？ <ol>
<li>View 自身是不会进行重绘的，除非调用 invalidate ; Widget 只支持一帧，然后每一帧 Flutter 的 framework 都会创建一个 Widget 实例树</li>
<li>View 是可变的 ; Widget 是不可变的，因此超轻量</li>
</ol>
</li>
</ul>
</li>
<li>如何更新 Widgets ?<ul>
<li>View 可以直接改变来更新 ; Widget 是不可变的，只能通过它的 state</li>
</ul>
</li>
<li>有两种 state 类型的 Widget，一种是 StatelessWidget，另一种是 StatefulWidget<ul>
<li>StatelessWidget : 表示没有 state 状态信息的 Widget，对于所描述的用户界面部分不依赖于对象中的配置信息以外的其他任何内容时，这种组件很有用，就比如 Android 中不会改变的 ImageView ，可以使用 StatelessWidget</li>
<li>StatefulWidget : 如果是网络请求动态改变界面的，就必须使用 StatefulWidget 来告诉 widget 状态 state 已更新，以便 widget 进行更新</li>
<li>要点 : 如果 Widget 改变了，就一定是 Stateful 的，但是如果它的父布局没变，那么父布局依然可以是 Stateless 的</li>
</ul>
</li>
<li><p>这么敲布局？ 我的 XML 呢？</p>
<ul>
<li>Android 中使用 XML 敲布局 ; Flutter 用 Widget tree 编写布局</li>
<li><p>例子：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Scaffold(</span><br><span class="line">    appBar: <span class="keyword">new</span> AppBar(</span><br><span class="line">      title: <span class="keyword">new</span> Text(<span class="string">"Sample App"</span>),</span><br><span class="line">    ),</span><br><span class="line">    body: <span class="keyword">new</span> Center(</span><br><span class="line">      child: <span class="keyword">new</span> MaterialButton(</span><br><span class="line">        onPressed: () &#123;&#125;,</span><br><span class="line">        child: <span class="keyword">new</span> Text(<span class="string">'Hello'</span>),</span><br><span class="line">        padding: <span class="keyword">new</span> EdgeInsets.only(left: <span class="number">10.0</span>, right: <span class="number">10.0</span>),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://flutter.io/widgets/layout/" target="_blank" rel="noopener"><font color="#69f">Flutter所提供的所有布局</font></a></p>
</li>
</ul>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/22/Retrofit-更换-host-Retrofit-离线缓存-WebView-离线缓存-X5-WebView-滑动冲突-和-滚动条/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JamesWong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JamesWong's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/22/Retrofit-更换-host-Retrofit-离线缓存-WebView-离线缓存-X5-WebView-滑动冲突-和-滚动条/" itemprop="url">Retrofit 更换 host</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-22T10:11:15+08:00">
                2018-01-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ol>
<li><p>动态改变 Retrofit 网络请求中的服务器连接</p>
<ul>
<li><p>添加一个允许运行时改变 hostname 的拦截器</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">class ChangeableBaseUrlInterceptor : Interceptor &#123;</span><br><span class="line">    <span class="meta">@Volatile</span> <span class="keyword">private</span> var host: HttpUrl? = <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line">    <span class="function">fun <span class="title">setHost</span><span class="params">(url: String)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.host = HttpUrl.parse(url)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Throws</span>(IOException::<span class="class"><span class="keyword">class</span>)</span></span><br><span class="line">    override fun intercept(chain: Interceptor.Chain): Response &#123;</span><br><span class="line">         val newRequest = host?.let &#123;</span><br><span class="line">            val newUrl = chain.request().url().newBuilder()</span><br><span class="line">                    .scheme(it.scheme())</span><br><span class="line">                    .host(it.url().toURI().host)</span><br><span class="line">                    .port(it.port())</span><br><span class="line">                    .build()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span><span class="meta">@let</span> chain.request().newBuilder()</span><br><span class="line">                    .url(newUrl)</span><br><span class="line">                    .build()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">if</span>(newRequest!=<span class="keyword">null</span>)&#123;</span><br><span class="line">             chain.proceed(newRequest)</span><br><span class="line">         &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">             chain.proceed(chain.request())</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<ol>
<li><p>Retrofit 离线缓存</p>
<ul>
<li><p>设置缓存路径</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">OkHttpClient.Builder clientBuilder = <span class="keyword">new</span> OkHttpClient.Builder();</span><br><span class="line"></span><br><span class="line">File cacheDir = <span class="keyword">new</span> File(ctx.getCacheDir(), <span class="string">"response"</span>);</span><br><span class="line"><span class="comment">//缓存的最大尺寸10m</span></span><br><span class="line">Cache cache = <span class="keyword">new</span> Cache(cacheDir, <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">10</span>);</span><br><span class="line">clientBuilder.cache(cache);</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加拦截器</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">class CacheInterceptor : Interceptor &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">intercept</span><span class="params">(chain: Interceptor.Chain)</span>: okhttp3.Response </span>&#123;</span><br><span class="line">        var request = chain.request()</span><br><span class="line">        val netAvailable = HttpUtil.isConnected(SYPApplication.globalContext)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (netAvailable) &#123;</span><br><span class="line">            request = request.newBuilder()</span><br><span class="line">                    <span class="comment">//网络可用 强制从网络获取数据</span></span><br><span class="line">                    .cacheControl(CacheControl.FORCE_NETWORK)</span><br><span class="line">                    .build()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            request = request.newBuilder()</span><br><span class="line">                    <span class="comment">//网络不可用 从缓存获取</span></span><br><span class="line">                    .cacheControl(CacheControl.FORCE_CACHE)</span><br><span class="line">                    .build()</span><br><span class="line">        &#125;</span><br><span class="line">        var response = chain.proceed(request)</span><br><span class="line">        <span class="keyword">if</span> (netAvailable) &#123;</span><br><span class="line">            response = response.newBuilder()</span><br><span class="line">                    .removeHeader(<span class="string">"Pragma"</span>)</span><br><span class="line">                    <span class="comment">// 有网络时 设置缓存超时时间1个小时</span></span><br><span class="line">                    .header(<span class="string">"Cache-Control"</span>, <span class="string">"public, max-age="</span> + <span class="number">60</span> * <span class="number">60</span>)</span><br><span class="line">                    .build()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            response = response.newBuilder()</span><br><span class="line">                    .removeHeader(<span class="string">"Pragma"</span>)</span><br><span class="line">                    <span class="comment">// 无网络时，设置超时为1周</span></span><br><span class="line">                    .header(<span class="string">"Cache-Control"</span>, <span class="string">"public, only-if-cached, max-stale="</span> + <span class="number">7</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span>)</span><br><span class="line">                    .build()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>WebView 离线缓存</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">webSettings?.cacheMode = <span class="keyword">if</span> (HttpUtil.isConnected(<span class="keyword">this</span>)) &#123;</span><br><span class="line">    <span class="comment">// 缓存模式为无缓存</span></span><br><span class="line">    WebSettings.LOAD_NO_CACHE</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    WebSettings.LOAD_CACHE_ELSE_NETWORK</span><br><span class="line">&#125;</span><br><span class="line">val cacheDir = File(cacheDir, <span class="string">"webviewCache"</span>)</span><br><span class="line"><span class="comment">//设置数据库缓存路径</span></span><br><span class="line">webSettings?.databasePath = cacheDir.absolutePath</span><br><span class="line"><span class="comment">//设置 应用 缓存目录</span></span><br><span class="line">webSettings?.setAppCachePath(cacheDir.absolutePath)</span><br><span class="line"><span class="comment">//开启 DOM 存储功能</span></span><br><span class="line">webSettings?.domStorageEnabled = <span class="keyword">true</span></span><br><span class="line"><span class="comment">//开启 数据库 存储功能</span></span><br><span class="line">webSettings?.databaseEnabled = <span class="keyword">true</span></span><br><span class="line"><span class="comment">//开启 应用缓存 功能</span></span><br><span class="line">webSettings?.setAppCacheEnabled(<span class="keyword">true</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>X5 的 WebView 与 SwipeRefreshLayout 滑动冲突</p>
<ul>
<li><p>注意 : <code>this.getScrollY()</code> 永远为 0 ，想要获取 WebView 顶部到 WebView 可视顶部距离的方法为 <code>this.getWebScrollY()</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 重写 WebView 的onScrollChagned 方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebView4Scroll</span> <span class="keyword">extends</span> <span class="title">WebView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> SwipeRefreshLayout swipeRefreshLayout;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WebView4Scroll</span><span class="params">(Context context, SwipeRefreshLayout swipeRefreshLayout)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context);</span><br><span class="line">        <span class="keyword">this</span>.swipeRefreshLayout = swipeRefreshLayout;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onScrollChanged</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> t, <span class="keyword">int</span> oldl, <span class="keyword">int</span> oldt)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onScrollChanged(l, t, oldl, oldt);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.getWebScrollY() == <span class="number">0</span>)&#123;</span><br><span class="line">            swipeRefreshLayout.setEnabled(<span class="keyword">true</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            swipeRefreshLayout.setEnabled(<span class="keyword">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>X5 的 WebView 去除滚动条</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mWebView?.x5WebViewExtension?.setScrollBarFadingEnabled(<span class="keyword">false</span>)</span><br></pre></td></tr></table></figure></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/12/Android-开发规范/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JamesWong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JamesWong's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/12/Android-开发规范/" itemprop="url">Android 开发规范</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-12T10:05:46+08:00">
                2018-01-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>转自 : <a href="https://www.jianshu.com/p/45c1675bec69" target="_blank" rel="noopener">https://www.jianshu.com/p/45c1675bec69</a><br>作者 : Blankj</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/Blankj/AndroidStandardDevelop/master/art/logo.png" alt=""></p>
<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><ul>
<li>1 前言</li>
<li>2 AS 规范</li>
<li>3 命名规范</li>
<li>4 代码样式规范</li>
<li>5 资源文件规范</li>
<li>6 版本统一规范</li>
<li>7 第三方库规范</li>
<li>8 注释规范</li>
<li>9 测试规范</li>
<li>10 其他的一些规范</li>
</ul>
<h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1 前言"></a>1 前言</h2><p>为了有利于项目维护、增强代码可读性、提升 Code Review 效率以及规范团队安卓开发，故提出以下安卓开发规范，该规范结合本人多年的开发经验并吸取多家之精华，可谓是本人的呕心沥血之作，称其为当前最完善的安卓开发规范一点也不为过，如有更好建议，欢迎到 GitHub 提 issue，原文地址：<a href="https://github.com/Blankj/AndroidStandardDevelop" target="_blank" rel="noopener"><strong><font color="#69f">Android 开发规范（完结版）</font></strong></a>。相关 Demo，可以查看我的 Android 开发工具类集合项目：<a href="https://github.com/Blankj/AndroidUtilCode" target="_blank" rel="noopener"><strong><font color="#69f">Android 开发人员不得不收集的代码</font></strong></a>。后续可能会根据该规范出一个 CheckStyle 插件来检查是否规范，当然也支持在 CI 上运行。</p>
<h2 id="2-AS-规范"><a href="#2-AS-规范" class="headerlink" title="2 AS 规范"></a>2 AS 规范</h2><p>工欲善其事，必先利其器。</p>
<ol>
<li>尽量使用最新的稳定版的 IDE 进行开发；</li>
<li>编码格式统一为 <strong>UTF-8</strong>；</li>
<li>编辑完 .java、.xml 等文件后一定要 <strong>格式化，格式化，格式化</strong>（如果团队有公共的样式包，那就遵循它，否则统一使用 AS 默认模板即可）；</li>
<li>删除多余的 import，减少警告出现，可利用 AS 的 Optimize Imports（Settings -&gt; Keymap -&gt; Optimize Imports）快捷键；</li>
<li>Android 开发者工具可以参考这里：<a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2017/0526/7973.html" target="_blank" rel="noopener"><strong><font color="#69f">Android 开发者工具</font></strong></a>；</li>
</ol>
<h2 id="3-命名规范"><a href="#3-命名规范" class="headerlink" title="3 命名规范"></a>3 命名规范</h2><p>代码中的命名严禁使用拼音与英文混合的方式，更不允许直接使用中文的方式。正确的英文拼写和语法可以让阅读者易于理解，避免歧义。</p>
<blockquote>
<p>注意：即使纯拼音命名方式也要避免采用。但 alibaba、taobao、youku、hangzhou 等国际通用的名称，可视同英文。</p>
</blockquote>
<h3 id="3-1-包名"><a href="#3-1-包名" class="headerlink" title="3.1 包名"></a>3.1 包名</h3><p>包名全部小写，连续的单词只是简单地连接起来，不使用下划线，采用反域名命名规则，全部使用小写字母。一级包名是顶级域名，通常为 <code>com</code>、<code>edu</code>、<code>gov</code>、<code>net</code>、<code>org</code> 等，二级包名为公司名，三级包名根据应用进行命名，后面就是对包名的划分了，关于包名的划分，推荐采用 PBF（按功能分包 Package By Feature），一开始我们采用的也是 PBL（按层分包 Package By Layer），很坑爹。PBF 可能不是很好区分在哪个功能中，不过也比 PBL 要好找很多，且 PBF 与 PBL 相比较有如下优势：</p>
<ul>
<li><p>package 内高内聚，package 间低耦合</p>
<p>  哪块要添新功能，只改某一个 package 下的东西。</p>
<p>  PBL 降低了代码耦合，但带来了 package 耦合，要添新功能，需要改 model、dbHelper、view、service 等等，需要改动好几个 package 下的代码，改动的地方越多，越容易产生新问题，不是吗？</p>
<p>  PBF 的话 featureA 相关的所有东西都在 featureA 包，feature 内高内聚、高度模块化，不同 feature 之间低耦合，相关的东西都放在一起，还好找。</p>
</li>
<li><p>package 有私有作用域（package-private scope）</p>
<p>  你负责开发这块功能，这个目录下所有东西都是你的。</p>
<p>  PBL 的方式是把所有工具方法都放在 util 包下，小张开发新功能时候发现需要一个 xxUtil，但它又不是通用的，那应该放在哪里？没办法，按照分层原则，我们还得放在 util 包下，好像不太合适，但放在其它包更不合适，功能越来越多，util 类也越定义越多。后来小李负责开发一块功能时发现需要一个 xxUtil，同样不通用，去 util 包一看，怎么已经有了，而且还没法复用，只好放弃 xx 这个名字，改为 xxxUtil……，因为 PBL 的 package 没有私有作用域，每一个包都是 public（跨包方法调用是很平常的事情，每一个包对其它包来说都是可访问的）；如果是 PBF，小张的 xxUtil 自然放在 featureA 下，小李的 xxUtil 在 featureB 下，如果觉得 util 好像是通用的，就去 util 包看看要不要把工具方法添进 xxUtil, class 命名冲突没有了。</p>
<p>  PBF 的 package 有私有作用域，featureA 不应该访问 featureB 下的任何东西（如果非访问不可，那就说明接口定义有问题）。</p>
</li>
<li><p>很容易删除功能</p>
<p>  统计发现新功能没人用，这个版本那块功能得去掉。</p>
<p>  如果是 PBL，得从功能入口到整个业务流程把受到牵连的所有能删的代码和 class 都揪出来删掉，一不小心就完蛋。</p>
<p>  如果是 PBF，好说，先删掉对应包，再删掉功能入口（删掉包后入口肯定报错了），完事。</p>
</li>
<li><p>高度抽象</p>
<p>  解决问题的一般方法是从抽象到具体，PBF 包名是对功能模块的抽象，包内的 class 是实现细节，符合从抽象到具体，而 PBL 弄反了。</p>
<p>  PBF 从确定 AppName 开始，根据功能模块划分 package，再考虑每块的具体实现细节，而 PBL 从一开始就要考虑要不要 dao 层，要不要 com 层等等。</p>
</li>
<li><p>只通过 class 来分离逻辑代码</p>
<p>  PBL 既分离 class 又分离 package，而 PBF 只通过 class 来分离逻辑代码。</p>
<p>  没有必要通过 package 分离，因为 PBL 中也可能出现尴尬的情况：</p>
<pre><code>├── service
    ├── MainService.java
</code></pre><p>  按照 PBL, service 包下的所有东西都是 Service，应该不需要 Service 后缀，但实际上通常为了方便，直接 import service 包，Service 后缀是为了避免引入的 class 和当前包下的 class 命名冲突，当然，不用后缀也可以，得写清楚包路径，比如 <code>new com.domain.service.MainService()</code>，麻烦；而 PBF 就很方便，无需 import，直接 <code>new MainService()</code> 即可。</p>
</li>
<li><p>package 的大小有意义了</p>
<p>  PBL 中包的大小无限增长是合理的，因为功能越添越多，而 PBF 中包太大（包里 class 太多）表示这块需要重构（划分子包）。</p>
</li>
</ul>
<p>如要知道更多好处，可以查看这篇博文：<a href="httsps://hackernoon.com/package-by-features-not-layers-2d076df1964d" target="_blank" rel="noopener"><strong><font color="#69f">Package by features, not layers</font></strong></a>，当然，我们大谷歌也有相应的 Sample：<a href="https://github.com/googlesamples/android-architecture/tree/todo-mvp/" target="_blank" rel="noopener"><strong><font color="#69f">todo-mvp</font></strong></a>，其结构如下所示，很值得学习。</p>
<pre><code>com
└── example
    └── android
        └── architecture
            └── blueprints
                └── todoapp
                    ├── BasePresenter.java
                    ├── BaseView.java
                    ├── addedittask
                    │   ├── AddEditTaskActivity.java
                    │   ├── AddEditTaskContract.java
                    │   ├── AddEditTaskFragment.java
                    │   └── AddEditTaskPresenter.java
                    ├── data
                    │   ├── Task.java
                    │   └── source
                    │       ├── TasksDataSource.java
                    │       ├── TasksRepository.java
                    │       ├── local
                    │       │   ├── TasksDbHelper.java
                    │       │   ├── TasksLocalDataSource.java
                    │       │   └── TasksPersistenceContract.java
                    │       └── remote
                    │           └── TasksRemoteDataSource.java
                    ├── statistics
                    │   ├── StatisticsActivity.java
                    │   ├── StatisticsContract.java
                    │   ├── StatisticsFragment.java
                    │   └── StatisticsPresenter.java
                    ├── taskdetail
                    │   ├── TaskDetailActivity.java
                    │   ├── TaskDetailContract.java
                    │   ├── TaskDetailFragment.java
                    │   └── TaskDetailPresenter.java
                    ├── tasks
                    │   ├── ScrollChildSwipeRefreshLayout.java
                    │   ├── TasksActivity.java
                    │   ├── TasksContract.java
                    │   ├── TasksFilterType.java
                    │   ├── TasksFragment.java
                    │   └── TasksPresenter.java
                    └── util
                        ├── ActivityUtils.java
                        ├── EspressoIdlingResource.java
                        └── SimpleCountingIdlingResource.java
</code></pre><p>参考以上的代码结构，按功能分包具体可以这样做：</p>
<pre><code>com
└── domain
    └── app
        ├── App.java 定义 Application 类
        ├── Config.java 定义配置数据（常量）
        ├── base 基础组件
        ├── custom_view 自定义视图
        ├── data 数据处理
        │   ├── DataManager.java 数据管理器，
        │   ├── local 来源于本地的数据，比如 SP，Database，File
        │   ├── model 定义 model（数据结构以及 getter/setter、compareTo、equals 等等，不含复杂操作）
        │   └── remote 来源于远端的数据
        ├── feature 功能
        │   ├── feature0 功能 0
        │   │   ├── feature0Activity.java
        │   │   ├── feature0Fragment.java
        │   │   ├── xxAdapter.java
        │   │   └── ... 其他 class
        │   └── ...其他功能
        ├── injection 依赖注入
        ├── util 工具类
        └── widget 小部件
</code></pre><h3 id="3-2-类名"><a href="#3-2-类名" class="headerlink" title="3.2 类名"></a>3.2 类名</h3><p>类名都以 <code>UpperCamelCase</code> 风格编写。</p>
<p>类名通常是名词或名词短语，接口名称有时可能是形容词或形容词短语。现在还没有特定的规则或行之有效的约定来命名注解类型</p>
<p>名词，采用大驼峰命名法，尽量避免缩写，除非该缩写是众所周知的， 比如 HTML、URL，如果类名称中包含单词缩写，则单词缩写的每个字母均应大写。</p>
<table>
<thead>
<tr>
<th>类</th>
<th>描述</th>
<th>例如</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Activity</code> 类</td>
<td><code>Activity</code> 为后缀标识</td>
<td>欢迎页面类 <code>WelcomeActivity</code></td>
</tr>
<tr>
<td><code>Adapter</code> 类</td>
<td><code>Adapter</code> 为后缀标识</td>
<td>新闻详情适配器 <code>NewsDetailAdapter</code></td>
</tr>
<tr>
<td>解析类</td>
<td><code>Parser</code> 为后缀标识</td>
<td>首页解析类 <code>HomePosterParser</code></td>
</tr>
<tr>
<td>工具方法类</td>
<td><code>Utils</code> 或 <code>Manager</code> 为后缀标识</td>
<td>线程池管理类：<code>ThreadPoolManager</code><br>日志工具类：<code>LogUtils</code>（<code>Logger</code> 也可）<br>打印工具类：<code>PrinterUtils</code></td>
</tr>
<tr>
<td>数据库类</td>
<td>以 <code>DBHelper</code> 后缀标识</td>
<td>新闻数据库：<code>NewsDBHelper</code></td>
</tr>
<tr>
<td><code>Service</code> 类</td>
<td>以 <code>Service</code> 为后缀标识</td>
<td>时间服务 <code>TimeService</code></td>
</tr>
<tr>
<td><code>BroadcastReceiver</code> 类</td>
<td>以 k 为后缀标识</td>
<td>推送接收 <code>JPushReceiver</code></td>
</tr>
<tr>
<td><code>ContentProvider</code> 类</td>
<td>以 <code>Provider</code> 为后缀标识</td>
<td><code>ShareProvider</code></td>
</tr>
<tr>
<td>自定义的共享基础类</td>
<td>以 <code>Base</code> 开头</td>
<td><code>BaseActivity</code>, <code>BaseFragment</code></td>
</tr>
</tbody>
</table>
<p>测试类的命名以它要测试的类的名称开始，以 Test 结束。例如：<code>HashTest</code> 或 <code>HashIntegrationTest</code>。</p>
<p>接口（interface）：命名规则与类一样采用大驼峰命名法，多以 able 或 ible 结尾，如 <code>interface Runnable</code>、<code>interface Accessible</code>。</p>
<blockquote>
<p>注意：如果项目采用 MVP，所有 Model、View、Presenter 的接口都以 I 为前缀，不加后缀，其他的接口采用上述命名规则。</p>
</blockquote>
<h3 id="3-3-方法名"><a href="#3-3-方法名" class="headerlink" title="3.3 方法名"></a>3.3 方法名</h3><p>方法名都以 <code>lowerCamelCase</code> 风格编写。</p>
<p>方法名通常是动词或动词短语。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>initXX()</code></td>
<td>初始化相关方法，使用 <code>init</code> 为前缀标识，如初始化布局 <code>initView()</code></td>
</tr>
<tr>
<td><code>isXX()</code><br><code>checkXX()</code></td>
<td>方法返回值为 <code>boolean</code> 型的请使用 <code>is/check</code> 为前缀标识</td>
</tr>
<tr>
<td><code>getXX()</code></td>
<td>返回某个值的方法，使用 <code>get</code> 为前缀标识</td>
</tr>
<tr>
<td><code>setXX()</code></td>
<td>设置某个属性值</td>
</tr>
<tr>
<td><code>handleXX()</code><br><code>processXX()</code></td>
<td>对数据进行处理的方法</td>
</tr>
<tr>
<td><code>displayXX()</code><br><code>showXX()</code></td>
<td>弹出提示框和提示信息，使用 <code>display/show</code> 为前缀标识</td>
</tr>
<tr>
<td><code>updateXX()</code></td>
<td>更新数据</td>
</tr>
<tr>
<td><code>saveXX()</code><br><code>insertXX()</code></td>
<td>保存或插入数据</td>
</tr>
<tr>
<td><code>resetXX()</code></td>
<td>重置数据</td>
</tr>
<tr>
<td><code>clearXX()</code></td>
<td>清除数据</td>
</tr>
<tr>
<td><code>removeXX()</code><br><code>deleteXX()</code></td>
<td>移除数据或者视图等，如 <code>removeView()</code></td>
</tr>
<tr>
<td><code>drawXX()</code></td>
<td>绘制数据或效果相关的，使用 <code>draw</code> 前缀标识</td>
</tr>
</tbody>
</table>
<h3 id="3-4-常量名"><a href="#3-4-常量名" class="headerlink" title="3.4 常量名"></a>3.4 常量名</h3><p>常量名命名模式为 <code>CONSTANT_CASE</code>，全部字母大写，用下划线分隔单词。那到底什么算是一个常量？</p>
<p>每个常量都是一个 <code>static final</code> 字段，但不是所有 <code>static final</code> 字段都是常量。在决定一个字段是否是一个常量时，得考虑它是否真的感觉像是一个常量。例如，如果观测任何一个该实例的状态是可变的，则它几乎肯定不会是一个常量。只是永远不打算改变的对象一般是不够的，它要真的一直不变才能将它示为常量。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Constants</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUMBER = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> ImmutableListNAMES = ImmutableList.of(<span class="string">"Ed"</span>, <span class="string">"Ann"</span>);</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> Joiner COMMA_JOINER = Joiner.on(<span class="string">','</span>); <span class="comment">// because Joiner is immutable</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> SomeMutableType[] EMPTY_ARRAY = &#123;&#125;;</span><br><span class="line"><span class="keyword">enum</span> SomeEnum &#123; ENUM_CONSTANT &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Not constants</span></span><br><span class="line"><span class="keyword">static</span> String nonFinal = <span class="string">"non-final"</span>;</span><br><span class="line"><span class="keyword">final</span> String nonStatic = <span class="string">"non-static"</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> SetmutableCollection = <span class="keyword">new</span> HashSet();</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> ImmutableSetmutableElements = ImmutableSet.of(mutable);</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(MyClass.getName());</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> String[] nonEmptyArray = &#123;<span class="string">"these"</span>, <span class="string">"can"</span>, <span class="string">"change"</span>&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="3-5-非常量字段名"><a href="#3-5-非常量字段名" class="headerlink" title="3.5 非常量字段名"></a>3.5 非常量字段名</h3><p>非常量字段名以 <code>lowerCamelCase</code> 风格的基础上改造为如下风格：基本结构为 <code>scope{Type0}VariableName{Type1}</code>、<code>type0VariableName{Type1}</code>、<code>variableName{Type1}</code>。</p>
<p>说明：<code>{}</code> 中的内容为可选。</p>
<blockquote>
<p>注意：所有的 VO（值对象）统一采用标准的 lowerCamelCase 风格编写，所有的 DTO（数据传输对象）就按照接口文档中定义的字段名编写。</p>
</blockquote>
<h4 id="3-5-1-scope（范围）"><a href="#3-5-1-scope（范围）" class="headerlink" title="3.5.1 scope（范围）"></a>3.5.1 scope（范围）</h4><p>非公有，非静态字段命名以 m 开头。</p>
<p>静态字段命名以 s 开头。</p>
<p>其他字段以小写字母开头。</p>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> publicField;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> MyClass sSingleton;</span><br><span class="line">    <span class="keyword">int</span> mPackagePrivate;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mPrivate;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span> mProtected;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用 1 个字符前缀来表示作用范围，1 个字符的前缀必须小写，前缀后面是由表意性强的一个单词或多个单词组成的名字，而且每个单词的首写字母大写，其它字母小写，这样保证了对变量名能够进行正确的断句。</p>
<h4 id="3-5-2-Type0（控件类型）"><a href="#3-5-2-Type0（控件类型）" class="headerlink" title="3.5.2 Type0（控件类型）"></a>3.5.2 Type0（控件类型）</h4><p>考虑到 Android 众多的 UI 控件，为避免控件和普通成员变量混淆以及更好地表达意思，所有用来表示控件的成员变量统一加上控件缩写作为前缀（具体见附录UI 控件缩写表）。</p>
<p>例如：<code>mIvAvatar</code>、<code>rvBooks</code>、<code>flContainer</code>。</p>
<h4 id="3-5-3-VariableName（变量名）"><a href="#3-5-3-VariableName（变量名）" class="headerlink" title="3.5.3 VariableName（变量名）"></a>3.5.3 VariableName（变量名）</h4><p>变量名中可能会出现量词，我们需要创建统一的量词，它们更容易理解，也更容易搜索。</p>
<p>例如：<code>mFirstBook</code>、<code>mPreBook</code>、<code>curBook</code>。</p>
<table>
<thead>
<tr>
<th>量词列表</th>
<th>量词后缀说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>First</td>
<td>一组变量中的第一个</td>
</tr>
<tr>
<td>Last</td>
<td>一组变量中的最后一个</td>
</tr>
<tr>
<td>Next</td>
<td>一组变量中的下一个</td>
</tr>
<tr>
<td>Pre</td>
<td>一组变量中的上一个</td>
</tr>
<tr>
<td>Cur</td>
<td>一组变量中的当前变量</td>
</tr>
</tbody>
</table>
<h4 id="3-5-4-Type1（数据类型）"><a href="#3-5-4-Type1（数据类型）" class="headerlink" title="3.5.4 Type1（数据类型）"></a>3.5.4 Type1（数据类型）</h4><p>对于表示集合或者数组的非常量字段名，我们可以添加后缀来增强字段的可读性，比如：</p>
<p>集合添加如下后缀：<code>List</code>、<code>Map</code>、<code>Set</code>。</p>
<p>数组添加如下后缀：<code>Arr</code>。</p>
<p>例如：<code>mIvAvatarList</code>、<code>userArr</code>、<code>firstNameSet</code>。</p>
<blockquote>
<p>注意：如果数据类型不确定的话，比如表示的是很多书，那么使用其复数形式来表示也可，例如 mBooks。</p>
</blockquote>
<h3 id="3-6-参数名"><a href="#3-6-参数名" class="headerlink" title="3.6 参数名"></a>3.6 参数名</h3><p>参数名以 <code>lowerCamelCase</code> 风格编写，参数应该避免用单个字符命名。</p>
<h3 id="3-7-局部变量名"><a href="#3-7-局部变量名" class="headerlink" title="3.7 局部变量名"></a>3.7 局部变量名</h3><p>局部变量名以 <code>lowerCamelCase</code> 风格编写，比起其它类型的名称，局部变量名可以有更为宽松的缩写。</p>
<p>虽然缩写更宽松，但还是要避免用单字符进行命名，除了临时变量和循环变量。</p>
<p>即使局部变量是 <code>final</code> 和不可改变的，也不应该把它示为常量，自然也不能用常量的规则去命名它。</p>
<h3 id="3-8-临时变量"><a href="#3-8-临时变量" class="headerlink" title="3.8 临时变量"></a>3.8 临时变量</h3><p>临时变量通常被取名为 <code>i</code>、<code>j</code>、<code>k</code>、<code>m</code> 和 <code>n</code>，它们一般用于整型；<code>c</code>、<code>d</code>、<code>e</code>，它们一般用于字符型。 如：<code>for (int i = 0; i &lt; len; i++)</code>。</p>
<h3 id="3-9-类型变量名"><a href="#3-9-类型变量名" class="headerlink" title="3.9 类型变量名"></a>3.9 类型变量名</h3><p>类型变量可用以下两种风格之一进行命名：</p>
<ol>
<li>单个的大写字母，后面可以跟一个数字（如：<code>E</code>, <code>T</code>, <code>X</code>, <code>T2</code>）。</li>
<li>以类命名方式（<a href="https://www.jianshu.com/p/45c1675bec69#32-%E7%B1%BB%E5%90%8D" target="_blank" rel="noopener"><strong><font color="#69f">参考3.2 类名</font></strong></a>），后面加个大写的 T（如：<code>RequestT</code>, <code>FooBarT</code>）。<br>更多还可参考：<a href="https://github.com/alibaba/p3c/blob/master/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4Java%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C%EF%BC%88%E7%BA%AA%E5%BF%B5%E7%89%88%EF%BC%89.pdf" target="_blank" rel="noopener"><strong><font color="#69f">阿里巴巴 Java 开发手册</font></strong></a></li>
</ol>
<h2 id="4-代码样式规范"><a href="#4-代码样式规范" class="headerlink" title="4 代码样式规范"></a>4 代码样式规范</h2><h3 id="4-1-使用标准大括号样式"><a href="#4-1-使用标准大括号样式" class="headerlink" title="4.1 使用标准大括号样式"></a>4.1 使用标准大括号样式</h3><p>左大括号不单独占一行，与其前面的代码位于同一行：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (something) &#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (somethingElse) &#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们需要在条件语句周围添加大括号。例外情况：如果整个条件语句（条件和主体）适合放在同一行，那么您可以（但不是必须）将其全部放在一行上。例如，我们接受以下样式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    body();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同样也接受以下样式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition) body();</span><br></pre></td></tr></table></figure>
<p>但不接受以下样式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition)</span><br><span class="line">    body();  <span class="comment">// bad!</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-编写简短方法"><a href="#4-2-编写简短方法" class="headerlink" title="4.2 编写简短方法"></a>4.2 编写简短方法</h3><p>在可行的情况下，尽量编写短小精炼的方法。我们了解，有些情况下较长的方法是恰当的，因此对方法的代码长度没有做出硬性限制。如果某个方法的代码超出 40 行，请考虑是否可以在不破坏程序结构的前提下对其拆解。</p>
<h3 id="4-3-类成员的顺序"><a href="#4-3-类成员的顺序" class="headerlink" title="4.3 类成员的顺序"></a>4.3 类成员的顺序</h3><p>这并没有唯一的正确解决方案，但如果都使用一致的顺序将会提高代码的可读性，推荐使用如下排序：</p>
<ol>
<li>常量</li>
<li>字段</li>
<li>构造函数</li>
<li>重写函数和回调</li>
<li>公有函数</li>
<li>私有函数</li>
<li>内部类或接口</li>
</ol>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = MainActivity.class.getSimpleName();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String mTitle;</span><br><span class="line">    <span class="keyword">private</span> TextView mTextViewTitle;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">        mTitle = title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setUpView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">AnInnerClass</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果类继承于 <code>Android</code> 组件（例如 <code>Activity</code> 或 <code>Fragment</code>），那么把重写函数按照他们的生命周期进行排序是一个非常好的习惯，例如，<code>Activity</code> 实现了 <code>onCreate()</code>、<code>onDestroy()</code>、<code>onPause()</code>、<code>onResume()</code>，它的正确排序如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Order matches Activity lifecycle</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-4-函数参数的排序"><a href="#4-4-函数参数的排序" class="headerlink" title="4.4 函数参数的排序"></a>4.4 函数参数的排序</h3><p>在 Android 开发过程中，<code>Context</code> 在函数参数中是再常见不过的了，我们最好把 <code>Context</code> 作为其第一个参数。</p>
<p>正相反，我们把回调接口应该作为其最后一个参数。</p>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Context always goes first</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">loadUser</span><span class="params">(Context context, <span class="keyword">int</span> userId)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Callbacks always go last</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadUserAsync</span><span class="params">(Context context, <span class="keyword">int</span> userId, UserCallback callback)</span></span>;</span><br></pre></td></tr></table></figure>
<h3 id="4-5-字符串常量的命名和值"><a href="#4-5-字符串常量的命名和值" class="headerlink" title="4.5 字符串常量的命名和值"></a>4.5 字符串常量的命名和值</h3><p>Android SDK 中的很多类都用到了键值对函数，比如<code>SharedPreferences</code>、<code>Bundle</code>、<code>Intent</code>，所以，即便是一个小应用，我们最终也不得不编写大量的字符串常量。</p>
<p>当时用到这些类的时候，我们 必须 将它们的键定义为 <code>static final</code> 字段，并遵循以下指示作为前缀。</p>
<table>
<thead>
<tr>
<th>类</th>
<th>字段名前缀</th>
</tr>
</thead>
<tbody>
<tr>
<td>SharedPreferences</td>
<td>PREF_</td>
</tr>
<tr>
<td>Bundle</td>
<td>BUNDLE_</td>
</tr>
<tr>
<td>Fragment Arguments</td>
<td>ARGUMENT_</td>
</tr>
<tr>
<td>Intent Extra</td>
<td>EXTRA_</td>
</tr>
<tr>
<td>Intent Action</td>
<td>ACTION_</td>
</tr>
</tbody>
</table>
<p>说明：虽然 Fragment.getArguments() 得到的也是 Bundle ，但因为这是 Bundle 的常用用法，所以特意为此定义一个不同的前缀。</p>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注意：字段的值与名称相同以避免重复问题</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> String PREF_EMAIL = <span class="string">"PREF_EMAIL"</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> String BUNDLE_AGE = <span class="string">"BUNDLE_AGE"</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> String ARGUMENT_USER_ID = <span class="string">"ARGUMENT_USER_ID"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 与意图相关的项使用完整的包名作为值的前缀</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> String EXTRA_SURNAME = <span class="string">"com.myapp.extras.EXTRA_SURNAME"</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> String ACTION_OPEN_USER = <span class="string">"com.myapp.action.ACTION_OPEN_USER"</span>;</span><br></pre></td></tr></table></figure>
<h3 id="4-6-Activities-和-Fragments-的传参"><a href="#4-6-Activities-和-Fragments-的传参" class="headerlink" title="4.6 Activities 和 Fragments 的传参"></a>4.6 Activities 和 Fragments 的传参</h3><p>当 <code>Activity</code> 或 <code>Fragment</code> 传递数据通过 <code>Intent</code> 或 <code>Bundle</code> 时，不同值的键须遵循上一条所提及到的。</p>
<p>当 <code>Activity</code> 或 <code>Fragment</code> 启动需要传递参数时，那么它需要提供一个 <code>public static</code> 的函数来帮助启动或创建它。</p>
<p>这方面，AS 已帮你写好了相关的 Live Templates，启动相关 <code>Activity</code> 的只需要在其内部输入 <code>starter</code> 即可生成它的启动器，如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">(Context context, User user)</span> </span>&#123;</span><br><span class="line">      Intent starter = <span class="keyword">new</span> Intent(context, MainActivity.class);</span><br><span class="line">      starter.putParcelableExtra(EXTRA_USER, user);</span><br><span class="line">      context.startActivity(starter);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同理，启动相关 <code>Fragment</code> 在其内部输入 <code>newInstance</code> 即可，如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MainFragment <span class="title">newInstance</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">      Bundle args = <span class="keyword">new</span> Bundle();</span><br><span class="line">      args.putParcelable(ARGUMENT_USER, user);</span><br><span class="line">      MainFragment fragment = <span class="keyword">new</span> MainFragment();</span><br><span class="line">      fragment.setArguments(args);</span><br><span class="line">      <span class="keyword">return</span> fragment;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：这些函数需要放在 onCreate() 之前的类的顶部；如果我们使用了这种方式，那么 extras 和 arguments 的键应该是 private 的，因为它们不再需要暴露给其他类来使用。</p>
</blockquote>
<h3 id="4-7-行长限制"><a href="#4-7-行长限制" class="headerlink" title="4.7 行长限制"></a>4.7 行长限制</h3><p>代码中每一行文本的长度都应该不超过 100 个字符。虽然关于此规则存在很多争论，但最终决定仍是以 100 个字符为上限，如果行长超过了 100（AS 窗口右侧的竖线就是设置的行宽末尾 ），我们通常有两种方法来缩减行长。</p>
<ul>
<li>提取一个局部变量或方法（最好）。</li>
<li>使用换行符将一行换成多行。</li>
</ul>
<p>不过存在以下例外情况：</p>
<ul>
<li>如果备注行包含长度超过 100 个字符的示例命令或文字网址，那么为了便于剪切和粘贴，该行可以超过 100 个字符。</li>
<li>导入语句行可以超出此限制，因为用户很少会看到它们（这也简化了工具编写流程）。</li>
</ul>
<h4 id="4-7-1-换行策略"><a href="#4-7-1-换行策略" class="headerlink" title="4.7.1 换行策略"></a>4.7.1 换行策略</h4><p>这没有一个准确的解决方案来决定如何换行，通常不同的解决方案都是有效的，但是有一些规则可以应用于常见的情况。</p>
<h5 id="4-7-1-1-操作符的换行"><a href="#4-7-1-1-操作符的换行" class="headerlink" title="4.7.1.1 操作符的换行"></a>4.7.1.1 操作符的换行</h5><p>除赋值操作符之外，我们把换行符放在操作符之前，例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> longName = anotherVeryLongVariable + anEvenLongerOne - thisRidiculousLongOne</span><br><span class="line">        + theFinalOne;</span><br></pre></td></tr></table></figure>
<p>赋值操作符的换行我们放在其后，例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> longName =</span><br><span class="line">        anotherVeryLongVariable + anEvenLongerOne - thisRidiculousLongOne + theFinalOne;</span><br></pre></td></tr></table></figure>
<h5 id="4-7-1-2-函数链的换行"><a href="#4-7-1-2-函数链的换行" class="headerlink" title="4.7.1.2 函数链的换行"></a>4.7.1.2 函数链的换行</h5><p>当同一行中调用多个函数时（比如使用构建器时），对每个函数的调用应该在新的一行中，我们把换行符插入在 <code>.</code> 之前。</p>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Picasso.with(context).load(<span class="string">"https://blankj.com/images/avatar.jpg"</span>).into(ivAvatar);</span><br></pre></td></tr></table></figure>
<p>我们应该使用如下规则：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Picasso.with(context)</span><br><span class="line">        .load(<span class="string">"https://blankj.com/images/avatar.jpg"</span>)</span><br><span class="line">        .into(ivAvatar);</span><br></pre></td></tr></table></figure>
<h5 id="4-7-1-3-多参数的换行"><a href="#4-7-1-3-多参数的换行" class="headerlink" title="4.7.1.3 多参数的换行"></a>4.7.1.3 多参数的换行</h5><p>当一个方法有很多参数或者参数很长的时候，我们应该在每个 , 后面进行换行。</p>
<p>比如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loadPicture(context, <span class="string">"https://blankj.com/images/avatar.jpg"</span>, ivAvatar, <span class="string">"Avatar of the user"</span>, clickListener);</span><br></pre></td></tr></table></figure>
<p>我们应该使用如下规则：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">loadPicture(context,</span><br><span class="line">        <span class="string">"https://blankj.com/images/avatar.jpg"</span>,</span><br><span class="line">        ivAvatar,</span><br><span class="line">        <span class="string">"Avatar of the user"</span>,</span><br><span class="line">        clickListener);</span><br></pre></td></tr></table></figure>
<h6 id="4-7-1-4-RxJava-链式的换行"><a href="#4-7-1-4-RxJava-链式的换行" class="headerlink" title="4.7.1.4 RxJava 链式的换行"></a>4.7.1.4 RxJava 链式的换行</h6><p>RxJava 的每个操作符都需要换新行，并且把换行符插入在 . 之前。</p>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Observable&lt;Location&gt; <span class="title">syncLocations</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> mDatabaseHelper.getAllLocations()</span><br><span class="line">            .concatMap(<span class="keyword">new</span> Func1&lt;Location, Observable&lt;? extends Location&gt;&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                 <span class="keyword">public</span> Observable&lt;? extends Location&gt; call(Location location) &#123;</span><br><span class="line">                     <span class="keyword">return</span> mRetrofitService.getLocation(location.id);</span><br><span class="line">                 &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .retry(<span class="keyword">new</span> Func2&lt;Integer, Throwable, Boolean&gt;() &#123;</span><br><span class="line">                 <span class="meta">@Override</span></span><br><span class="line">                 <span class="function"><span class="keyword">public</span> Boolean <span class="title">call</span><span class="params">(Integer numRetries, Throwable throwable)</span> </span>&#123;</span><br><span class="line">                     <span class="keyword">return</span> throwable <span class="keyword">instanceof</span> RetrofitError;</span><br><span class="line">                 &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-资源文件规范"><a href="#5-资源文件规范" class="headerlink" title="5 资源文件规范"></a>5 资源文件规范</h2><p>资源文件命名为全部小写，采用下划线命名法。</p>
<p>如果想对资源文件进行分包可以参考我这篇文章：<a href="https://blankj.com/2016/09/21/android-studio-classify-src-package/" target="_blank" rel="noopener"><strong><font color="#69f">Android Studio 下对资源进行分包</font></strong></a>。</p>
<p><img src="https://blankj.com/2016/09/21/android-studio-classify-src-package/classify_dir.png" alt=""></p>
<p>从图中可以看出新增了 <code>res_core</code> 和 <code>res_sub</code> 两个资源包，这样我们可以对每个模块的资源都进行具体分类，是不是心动了，赶紧照着如下配置试一试吧，别再让资源文件们“混为一潭”了。</p>
<p>方法很简单，配置我们的app文件夹下的 <code>build.gradle</code> 文件，比如</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    ...</span><br><span class="line">    sourceSets &#123;</span><br><span class="line">        main &#123;</span><br><span class="line">            res.srcDirs(<span class="string">'src/main/res'</span>, <span class="string">'src/main/res_core'</span>, <span class="string">'src/main/res_sub'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置完之后，sync project 一下就成功了。</p>
<h3 id="5-1-动画资源文件（anim-和-animator-）"><a href="#5-1-动画资源文件（anim-和-animator-）" class="headerlink" title="5.1 动画资源文件（anim/ 和 animator/）"></a>5.1 动画资源文件（anim/ 和 animator/）</h3><p>安卓主要包含属性动画和视图动画，其视图动画包括补间动画和逐帧动画。属性动画文件需要放在 <code>res/animator/</code> 目录下，视图动画文件需放在 <code>res/anim/</code> 目录下。</p>
<p>命名规则：<code>{模块名_}逻辑名称</code>。</p>
<p>说明：<code>{}</code> 中的内容为可选，逻辑名称 可由多个单词加下划线组成。</p>
<p>例如：<code>refresh_progress.xml</code>、<code>market_cart_add.xml</code>、<code>market_cart_remove.xml</code>。</p>
<p>如果是普通的补间动画或者属性动画，可采用：<code>动画类型_方向</code> 的命名方式。</p>
<p>例如：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fade_in</code></td>
<td>淡入</td>
</tr>
<tr>
<td><code>fade_out</code></td>
<td>淡出</td>
</tr>
<tr>
<td><code>push_down_in</code></td>
<td>从下方推入</td>
</tr>
<tr>
<td><code>push_down_out</code></td>
<td>从下方推出</td>
</tr>
<tr>
<td><code>push_left</code></td>
<td>推向左方</td>
</tr>
<tr>
<td><code>slide_in_from_top</code></td>
<td>从头部滑动进入</td>
</tr>
<tr>
<td><code>zoom_enter</code></td>
<td>变形进入</td>
</tr>
<tr>
<td><code>slide_in</code></td>
<td>滑动进入</td>
</tr>
<tr>
<td><code>shrink_to_middle</code></td>
<td>中间缩小</td>
</tr>
</tbody>
</table>
<h3 id="5-2-颜色资源文件（color-）"><a href="#5-2-颜色资源文件（color-）" class="headerlink" title="5.2 颜色资源文件（color/）"></a>5.2 颜色资源文件（color/）</h3><p>专门存放颜色相关的资源文件。</p>
<p>命名规则：<code>类型_逻辑名称</code>。</p>
<p>例如：<code>sel_btn_font.xml</code>。</p>
<p>颜色资源也可以放于 <code>res/drawable/</code> 目录，引用时则用 <code>@drawable</code> 来引用，但不推荐这么做，最好还是把两者分开。</p>
<h3 id="5-3-图片资源文件（drawable-和-mipmap-）"><a href="#5-3-图片资源文件（drawable-和-mipmap-）" class="headerlink" title="5.3 图片资源文件（drawable/ 和 mipmap/）"></a>5.3 图片资源文件（drawable/ 和 mipmap/）</h3><p><code>res/drawable/</code> 目录下放的是位图文件（<code>.png</code>、<code>.9.png</code>、<code>.jpg</code>、<code>.gif</code>）或编译为可绘制对象资源子类型的 XML 文件，而 <code>res/mipmap/</code> 目录下放的是不同密度的启动图标，所以 <code>res/mipmap/</code> 只用于存放启动图标，其余图片资源文件都应该放到 <code>res/drawable/</code> 目录下。</p>
<p>命名规则：<code>类型{_模块名}_逻辑名称</code>、<code>类型{_模块名}_颜色</code>。</p>
<p>说明：<code>{}</code> 中的内容为可选；<code>类型</code> 可以是<a href=""><strong><font color="#69f">可绘制对象资源类型</font></strong></a>，也可以是控件类型（具体见附录<a href="">UI 控件缩写表</a>）；最后可加后缀 <code>_small</code> 表示小图，<code>_big</code> 表示大图。</p>
<p>例如：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>btn_main_about.png</code></td>
<td>主页关于按键 <code>类型_模块名_逻辑名称</code></td>
</tr>
<tr>
<td><code>btn_back.png</code></td>
<td>返回按键 <code>类型_逻辑名称</code></td>
</tr>
<tr>
<td><code>divider_maket_white.png</code></td>
<td>商城白色分割线 <code>类型_模块名_颜色</code></td>
</tr>
<tr>
<td><code>ic_edit.png</code></td>
<td>编辑图标 <code>类型_逻辑名称</code></td>
</tr>
<tr>
<td><code>bg_main.png</code></td>
<td>主页背景 <code>类型_逻辑名称</code></td>
</tr>
<tr>
<td><code>btn_red.png</code></td>
<td>红色按键 <code>类型_颜色</code></td>
</tr>
<tr>
<td><code>btn_red_big.png</code></td>
<td>红色大按键 <code>类型_颜色</code></td>
</tr>
<tr>
<td><code>ic_head_small.png</code></td>
<td>小头像图标 <code>类型_逻辑名称</code></td>
</tr>
<tr>
<td><code>bg_input.png</code></td>
<td>输入框背景 <code>类型_逻辑名称</code></td>
</tr>
<tr>
<td><code>divider_white.png</code></td>
<td>白色分割线 <code>类型_颜色</code></td>
</tr>
<tr>
<td><code>bg_main_head.png</code></td>
<td>主页头部背景 <code>类型_模块名_逻辑名称</code></td>
</tr>
<tr>
<td><code>def_search_cell.png</code></td>
<td>搜索页面默认单元图片 <code>类型_模块名_逻辑名称</code></td>
</tr>
<tr>
<td><code>ic_more_help.png</code></td>
<td>更多帮助图标 <code>类型_逻辑名称</code></td>
</tr>
<tr>
<td><code>divider_list_line.png</code></td>
<td>列表分割线 <code>类型_逻辑名称</code></td>
</tr>
<tr>
<td><code>sel_search_ok.xml</code></td>
<td>搜索界面确认选择器 <code>类型_模块名_逻辑名称</code></td>
</tr>
<tr>
<td><code>shape_music_ring.xml</code></td>
<td>音乐界面环形形状 <code>类型_模块名_逻辑名称</code></td>
</tr>
</tbody>
</table>
<p>如果有多种形态，如按钮选择器：<code>sel_btn_xx.xml</code>，采用如下命名：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sel_btn_xx</code></td>
<td>作用在 <code>btn_xx</code> 上的 <code>selector</code></td>
</tr>
<tr>
<td><code>btn_xx_normal</code></td>
<td>默认状态效果</td>
</tr>
<tr>
<td><code>btn_xx_pressed</code></td>
<td><code>state_pressed</code> 点击效果</td>
</tr>
<tr>
<td><code>btn_xx_focused</code></td>
<td><code>state_focused</code> 聚焦效果</td>
</tr>
<tr>
<td><code>btn_xx_disabled</code></td>
<td><code>state_enabled</code> 不可用效果</td>
</tr>
<tr>
<td><code>btn_xx_checked</code></td>
<td><code>state_checked</code> 选中效果</td>
</tr>
<tr>
<td><code>btn_xx_selected</code></td>
<td><code>state_selected</code> 选中效果</td>
</tr>
<tr>
<td><code>btn_xx_hovered</code></td>
<td><code>state_hovered</code> 悬停效果</td>
</tr>
<tr>
<td><code>btn_xx_checkable</code></td>
<td><code>state_checkable</code> 可选效果</td>
</tr>
<tr>
<td><code>btn_xx_activated</code></td>
<td><code>state_activated</code> 激活效果</td>
</tr>
<tr>
<td><code>btn_xx_window_focused</code></td>
<td><code>state_window_focused</code> 窗口聚焦效果</td>
</tr>
</tbody>
</table>
<blockquote>
<p>注意：使用 Android Studio 的插件 SelectorChapek 可以快速生成 selector，前提是命名要规范。</p>
</blockquote>
<h3 id="5-4-布局资源文件（layout-）"><a href="#5-4-布局资源文件（layout-）" class="headerlink" title="5.4 布局资源文件（layout/）"></a>5.4 布局资源文件（layout/）</h3><p>命名规则：<code>类型_模块名</code>、<code>类型{_模块名}_逻辑名称</code>。</p>
<p>说明：<code>{}</code> 中的内容为可选。</p>
<p>例如：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>activity_main.xml</code></td>
<td>主窗体 <code>类型_模块名</code></td>
</tr>
<tr>
<td><code>activity_main_head.xml</code></td>
<td>主窗体头部 <code>类型_模块名_逻辑名称</code></td>
</tr>
<tr>
<td><code>fragment_music.xml</code></td>
<td>音乐片段 <code>类型_模块名</code></td>
</tr>
<tr>
<td><code>fragment_music_player.xml</code></td>
<td>音乐片段的播放器 <code>类型_模块名_逻辑名称</code></td>
</tr>
<tr>
<td><code>dialog_loading.xml</code></td>
<td>加载对话框 <code>类型_逻辑名称</code></td>
</tr>
<tr>
<td><code>ppw_info.xml</code></td>
<td>信息弹窗（PopupWindow） <code>类型_逻辑名称</code></td>
</tr>
<tr>
<td><code>item_main_song.xml</code></td>
<td>主页歌曲列表项 <code>类型_模块名_逻辑名称</code></td>
</tr>
</tbody>
</table>
<h3 id="5-5-菜单资源文件（menu-）"><a href="#5-5-菜单资源文件（menu-）" class="headerlink" title="5.5 菜单资源文件（menu/）"></a>5.5 菜单资源文件（menu/）</h3><p>菜单相关的资源文件应放在该目录下。</p>
<p>命名规则：<code>{模块名_}逻辑名称</code></p>
<p>说明：<code>{}</code> 中的内容为可选。</p>
<p>例如：<code>main_drawer.xml</code>、<code>navigation.xml</code>。</p>
<h3 id="5-6-values-资源文件（values-）"><a href="#5-6-values-资源文件（values-）" class="headerlink" title="5.6 values 资源文件（values/）"></a>5.6 values 资源文件（values/）</h3><p><code>values/</code> 资源文件下的文件都以 <code>s</code> 结尾，如 <code>attrs.xml</code>、<code>colors.xml</code>、<code>dimens.xml</code>，起作用的不是文件名称，而是 <code>&lt;resources&gt;</code> 标签下的各种标签，比如 <code>&lt;style&gt;</code> 决定样式，<code>&lt;color&gt;</code> 决定颜色，所以，可以把一个大的 <code>xml</code> 文件分割成多个小的文件，比如可以有多个 <code>style</code> 文件，如 <code>styles.xml</code>、<code>styles_home.xml</code>、<code>styles_item_details.xml</code>、<code>styles_forms.xml</code>。</p>
<h4 id="5-6-1-colors-xml"><a href="#5-6-1-colors-xml" class="headerlink" title="5.6.1 colors.xml"></a>5.6.1 colors.xml</h4><p><code>&lt;color&gt;</code> 的 <code>name</code> 命名使用下划线命名法，在你的 <code>colors.xml</code> 文件中应该只是映射颜色的名称一个 ARGB 值，而没有其它的。不要使用它为不同的按钮来定义 ARGB 值。</p>
<p>例如，不要像下面这样做：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"button_foreground"</span>&gt;</span>#FFFFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"button_background"</span>&gt;</span>#2A91BD<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"comment_background_inactive"</span>&gt;</span>#5F5F5F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"comment_background_active"</span>&gt;</span>#939393<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"comment_foreground"</span>&gt;</span>#FFFFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"comment_foreground_important"</span>&gt;</span>#FF9D2F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"comment_shadow"</span>&gt;</span>#323232<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用这种格式，会非常容易重复定义 ARGB 值，而且如果应用要改变基色的话会非常困难。同时，这些定义是跟一些环境关联起来的，如 <code>button</code> 或者 <code>comment</code>，应该放到一个按钮风格中，而不是在 <code>colors.xml</code> 文件中。</p>
<p>相反，应该这样做：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- grayscale --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"white"</span>     &gt;</span>#FFFFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gray_light"</span>&gt;</span>#DBDBDB<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gray"</span>      &gt;</span>#939393<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gray_dark"</span> &gt;</span>#5F5F5F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"black"</span>     &gt;</span>#323232<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- basic colors --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"green"</span>&gt;</span>#27D34D<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"blue"</span>&gt;</span>#2A91BD<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"orange"</span>&gt;</span>#FF9D2F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"red"</span>&gt;</span>#FF432F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>向应用设计者那里要这个调色板，名称不需要跟 <code>&quot;green&quot;</code>、<code>&quot;blue&quot;</code> 等等相同。<code>&quot;brand_primary&quot;</code>、<code>&quot;brand_secondary&quot;</code>、<code>&quot;brand_negative&quot;</code> 这样的名字也是完全可以接受的。像这样规范的颜色很容易修改或重构，会使应用一共使用了多少种不同的颜色变得非常清晰。通常一个具有审美价值的 UI 来说，减少使用颜色的种类是非常重要的。</p>
<blockquote>
<p>注意：如果某些颜色和主题有关，那就单独写一个 colors_theme.xml。</p>
</blockquote>
<h4 id="5-6-2-dimens-xml"><a href="#5-6-2-dimens-xml" class="headerlink" title="5.6.2 dimens.xml"></a>5.6.2 dimens.xml</h4><p>像对待 <code>colors.xml</code> 一样对待 <code>dimens.xml</code> 文件，与定义颜色调色板一样，你同时也应该定义一个空隙间隔和字体大小的“调色板”。 一个好的例子，如下所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- font sizes --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"font_22"</span>&gt;</span>22sp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"font_18"</span>&gt;</span>18sp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"font_15"</span>&gt;</span>15sp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"font_12"</span>&gt;</span>12sp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- typical spacing between two views --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"spacing_40"</span>&gt;</span>40dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"spacing_24"</span>&gt;</span>24dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"spacing_14"</span>&gt;</span>14dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"spacing_10"</span>&gt;</span>10dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"spacing_4"</span>&gt;</span>4dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- typical sizes of views --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"button_height_60"</span>&gt;</span>60dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"button_height_40"</span>&gt;</span>40dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"button_height_32"</span>&gt;</span>32dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>布局时在写 <code>margins</code> 和 <code>paddings</code> 时，你应该使用 <code>spacing_xx</code> 尺寸格式来布局，而不是像对待 <code>string</code> 字符串一样直接写值，像这样规范的尺寸很容易修改或重构，会使应用所有用到的尺寸一目了然。 这样写会非常有感觉，会使组织和改变风格或布局非常容易。</p>
<h4 id="5-6-3-strings-xml"><a href="#5-6-3-strings-xml" class="headerlink" title="5.6.3 strings.xml"></a>5.6.3 strings.xml</h4><p><code>&lt;string&gt;</code> 的 <code>name</code> 命名使用下划线命名法，采用以下规则：<code>{模块名_}逻辑名称</code>，这样方便同一个界面的所有 <code>string</code> 都放到一起，方便查找。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>main_menu_about</td>
<td>主菜单按键文字</td>
</tr>
<tr>
<td>friend_title</td>
<td>好友模块标题栏</td>
</tr>
<tr>
<td>friend_dialog_del</td>
<td>好友删除提示</td>
</tr>
<tr>
<td>login_check_email</td>
<td>登录验证</td>
</tr>
<tr>
<td>dialog_title</td>
<td>弹出框标题</td>
</tr>
<tr>
<td>button_ok</td>
<td>确认键</td>
</tr>
<tr>
<td>loading</td>
<td>加载文字</td>
</tr>
</tbody>
</table>
<h4 id="5-6-4-styles-xml"><a href="#5-6-4-styles-xml" class="headerlink" title="5.6.4 styles.xml"></a>5.6.4 styles.xml</h4><p><code>&lt;style&gt;</code> 的 <code>name</code> 命名使用大驼峰命名法，几乎每个项目都需要适当的使用 <code>styles.xml</code> 文件，因为对于一个视图来说，有一个重复的外观是很常见的，将所有的外观细节属性（<code>colors</code>、<code>padding</code>、<code>font</code>）放在 <code>styles.xml</code> 文件中。 在应用中对于大多数文本内容，最起码你应该有一个通用的 <code>styles.xml</code> 文件，例如：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"ContentText"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:textSize"</span>&gt;</span>@dimen/font_normal<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:textColor"</span>&gt;</span>@color/basic_black<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>应用到 TextView 中：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">"@string/price"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">"@style/ContentText"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>或许你需要为按钮控件做同样的事情，不要停止在那里，将一组相关的和重复 <code>android:xxxx</code> 的属性放到一个通用的 <code>&lt;style&gt;</code> 中。</p>
<h3 id="5-7-id-命名"><a href="#5-7-id-命名" class="headerlink" title="5.7 id 命名"></a>5.7 id 命名</h3><p>命名规则：<code>view缩写{_模块名}_逻辑名</code>，例如： <code>btn_main_search</code>、<code>btn_back</code>。</p>
<p>如果在项目中有用黄油刀的话，使用 AS 的插件：ButterKnife Zelezny，可以非常方便帮助你生成注解；没用黄油刀的话可以使用 Android Code Generator 插件。</p>
<h2 id="6-版本统一规范"><a href="#6-版本统一规范" class="headerlink" title="6 版本统一规范"></a>6 版本统一规范</h2><p>Android 开发存在着众多版本的不同，比如 <code>compileSdkVersion</code>、<code>minSdkVersion</code>、<code>targetSdkVersion</code> 以及项目中依赖第三方库的版本，不同的 module 及不同的开发人员都有不同的版本，所以需要一个统一版本规范的文件。</p>
<p>具体可以参考这篇博文：<a href="https://blankj.com/2016/09/21/android-keep-version-unity/" target="_blank" rel="noopener"><strong><font color="#69f">Android 开发之版本统一规范</font></strong></a>。</p>
<p>如果是开发多个系统级别的应用，当多个应用同时用到相同的 <code>so</code> 库时，一定要确保 <code>so</code> 库的版本一致，否则可能会引发应用崩溃。</p>
<h2 id="7-第三方库规范"><a href="#7-第三方库规范" class="headerlink" title="7 第三方库规范"></a>7 第三方库规范</h2><p>别再闭门造车了，用用最新最火的技术吧，安利一波：<a href=""><strong><font color="#69f">Android 流行框架查速表</font></strong></a>，顺便带上自己的干货：<a href="">Android 开发人员不得不收集的代码</a>。</p>
<p>希望 Team 能用时下较新的技术，对开源库的选取，一般都需要选择比较稳定的版本，作者在维护的项目，要考虑作者对 issue 的解决，以及开发者的知名度等各方面。选取之后，一定的封装是必要的。</p>
<p>个人推荐 Team 可使用如下优秀轮子：</p>
<ul>
<li><a href="https://github.com/square/retrofit" target="_blank" rel="noopener"><strong><font color="#69f">Retrofit</font></strong></a></li>
<li><a href="https://github.com/ReactiveX/RxAndroid" target="_blank" rel="noopener"><strong><font color="#69f">RxAndroid</font></strong></a></li>
<li><a href="https://github.com/square/okhttp" target="_blank" rel="noopener"><strong><font color="#69f">OkHttp</font></strong></a></li>
<li><a href="https://github.com/bumptech/glide" target="_blank" rel="noopener"><strong><font color="#69f">Glide</font></strong></a> / <a href="https://github.com/facebook/fresco" target="_blank" rel="noopener"><strong><font color="#69f">Fresco</font></strong></a></li>
<li><a href="https://github.com/google/gson" target="_blank" rel="noopener"><strong><font color="#69f">Gson</font></strong></a> / <a href="https://github.com/alibaba/fastjson" target="_blank" rel="noopener"><strong><font color="#69f">Fastjson</font></strong></a></li>
<li><a href="https://github.com/greenrobot/EventBus" target="_blank" rel="noopener"><strong><font color="#69f">EventBus</font></strong></a> / <a href="https://github.com/bboyfeiyu/AndroidEventBus" target="_blank" rel="noopener"><strong><font color="#69f">AndroidEventBus</font></strong></a></li>
<li><a href="https://github.com/greenrobot/greenDAO" target="_blank" rel="noopener"><strong><font color="#69f">GreenDao</font></strong></a></li>
<li><a href="https://github.com/google/dagger" target="_blank" rel="noopener"><strong><font color="#69f">Dagger2（选用）</font></strong></a></li>
<li><a href="https://github.com/Tencent/tinker" target="_blank" rel="noopener"><strong><font color="#69f">Tinker（选用）</font></strong></a></li>
</ul>
<h2 id="8-注释规范"><a href="#8-注释规范" class="headerlink" title="8 注释规范"></a>8 注释规范</h2><p>为了减少他人阅读你代码的痛苦值，请在关键地方做好注释。</p>
<h3 id="8-1-类注释"><a href="#8-1-类注释" class="headerlink" title="8.1 类注释"></a>8.1 类注释</h3><p>每个类完成后应该有作者姓名和联系方式的注释，对自己的代码负责。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> *     author : Blankj</span></span><br><span class="line"><span class="comment"> *     e-mail : xxx@xx</span></span><br><span class="line"><span class="comment"> *     time   : 2017/03/07</span></span><br><span class="line"><span class="comment"> *     desc   : xxxx 描述</span></span><br><span class="line"><span class="comment"> *     version: 1.0</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WelcomeActivity</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体可以在 AS 中自己配制，进入 Settings -&gt; Editor -&gt; File and Code Templates -&gt; Includes -&gt; File Header，输入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> *     author : $&#123;USER&#125;</span></span><br><span class="line"><span class="comment"> *     e-mail : xxx@xx</span></span><br><span class="line"><span class="comment"> *     time   : $&#123;YEAR&#125;/$&#123;MONTH&#125;/$&#123;DAY&#125;</span></span><br><span class="line"><span class="comment"> *     desc   :</span></span><br><span class="line"><span class="comment"> *     version: 1.0</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>这样便可在每次新建类的时候自动加上该头注释。</p>
<h3 id="8-2-方法注释"><a href="#8-2-方法注释" class="headerlink" title="8.2 方法注释"></a>8.2 方法注释</h3><p>每一个成员方法（包括自定义成员方法、覆盖方法、属性方法）的方法头都必须做方法头注释，在方法前一行输入 <code>/** + 回车</code> 或者设置 <code>Fix doc comment</code>（Settings -&gt; Keymap -&gt; Fix doc comment）快捷键，AS 便会帮你生成模板，我们只需要补全参数即可，如下所示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * bitmap 转 byteArr</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> bitmap bitmap 对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> format 格式</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 字节数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] bitmap2Bytes(Bitmap bitmap, CompressFormat format) &#123;</span><br><span class="line">    <span class="keyword">if</span> (bitmap == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    ByteArrayOutputStream baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">    bitmap.compress(format, <span class="number">100</span>, baos);</span><br><span class="line">    <span class="keyword">return</span> baos.toByteArray();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-3-块注释"><a href="#8-3-块注释" class="headerlink" title="8.3 块注释"></a>8.3 块注释</h3><p>块注释与其周围的代码在同一缩进级别。它们可以是 <code>/* ... */</code> 风格，也可以是 <code>// ...</code> 风格（<code>//</code>后最好带一个空格）。对于多行的 <code>/* ... */</code> 注释，后续行必须从 <code>*</code> 开始， 并且与前一行的 <code>*</code> 对齐。以下示例注释都是 OK 的。</p>
<pre><code>/*
 * This is
 * okay.
 */

// And so
// is this.

/* Or you can
* even do this. */
</code></pre><p>注释不要封闭在由星号或其它字符绘制的框架里。</p>
<blockquote>
<p>Tip：在写多行注释时，如果你希望在必要时能重新换行（即注释像段落风格一样），那么使用 /<em> … </em>/。</p>
</blockquote>
<h3 id="8-4-其他一些注释"><a href="#8-4-其他一些注释" class="headerlink" title="8.4 其他一些注释"></a>8.4 其他一些注释</h3><p>AS 已帮你集成了一些注释模板，我们只需要直接使用即可，在代码中输入 <code>todo</code>、<code>fixme</code> 等这些注释模板，回车后便会出现如下注释。</p>
<pre><code>// TODO: 17/3/14 需要实现，但目前还未实现的功能的说明
// FIXME: 17/3/14 需要修正，甚至代码是错误的，不能工作，需要修复的说明
</code></pre><h2 id="9-测试规范"><a href="#9-测试规范" class="headerlink" title="9 测试规范"></a>9 测试规范</h2><p>业务开发完成之后，开发人员做单元测试，单元测试完成之后，保证单元测试全部通过，同时单元测试代码覆盖率达到一定程度（这个需要开发和测试约定，理论上越高越好），开发提测。</p>
<h3 id="9-1-单元测试"><a href="#9-1-单元测试" class="headerlink" title="9.1 单元测试"></a>9.1 单元测试</h3><p>测试类的名称应该是所测试类的名称加 <code>Test</code>，我们创建 <code>DatabaseHelper</code> 的测试类，其名应该叫 <code>DatabaseHelperTest</code>。</p>
<p>测试函数被 <code>@Test</code> 所注解，函数名通常以被测试的方法为前缀，然后跟随是前提条件和预期的结果。</p>
<p>模板：<code>void methodName 前提条件和预期结果()</code><br>例子：<code>void signInWithEmptyEmailFails()</code></p>
<blockquote>
<p>注意：如果函数足够清晰，那么前提条件和预期的结果是可以省略的。</p>
</blockquote>
<p>有时一个类可能包含大量的方法，同时需要对每个方法进行几次测试。在这种情况下，建议将测试类分成多个类。例如，如果 <code>DataManager</code> 包含很多方法，我们可能要把它分成 <code>DataManagerSignInTest</code>、<code>DataManagerLoadUsersTest</code> 等等。</p>
<h3 id="9-2-Espresso-测试"><a href="#9-2-Espresso-测试" class="headerlink" title="9.2 Espresso 测试"></a>9.2 Espresso 测试</h3><p>每个 Espresso 测试通常是针对 <code>Activity</code>，所以其测试名就是其被测的 <code>Activity</code> 的名称加 <code>Test</code>，比如 <code>SignInActivityTest</code>。</p>
<h2 id="10-其他的一些规范"><a href="#10-其他的一些规范" class="headerlink" title="10 其他的一些规范"></a>10 其他的一些规范</h2><ol>
<li><p>合理布局，有效运用 <code>&lt;merge&gt;</code>、<code>&lt;ViewStub&gt;</code>、<code>&lt;include&gt;</code> 标签；</p>
</li>
<li><p><code>Activity</code> 和 <code>Fragment</code> 里面有许多重复的操作以及操作步骤，所以我们都需要提供一个 <code>BaseActivity</code> 和 <code>BaseFragment</code>，让所有的 <code>Activity</code> 和 <code>Fragment</code> 都继承这个基类。</p>
</li>
<li><p>方法基本上都按照调用的先后顺序在各自区块中排列；</p>
</li>
<li><p>相关功能作为小区块放在一起（或者封装掉）；</p>
</li>
<li><p>当一个类有多个构造函数，或是多个同名函数，这些函数应该按顺序出现在一起，中间不要放进其它函数；</p>
</li>
<li><p>数据提供统一的入口。无论是在 MVP、MVC 还是 MVVM 中，提供一个统一的数据入口，都可以让代码变得更加易于维护。比如可使用一个 <code>DataManager</code>，把 <code>http</code>、<code>preference</code>、<code>eventpost</code>、<code>database</code> 都放在 <code>DataManager</code> 里面进行操作，我们只需要与 DataManager打交道；</p>
</li>
<li><p>多用组合，少用继承；</p>
</li>
<li><p>提取方法，去除重复代码。对于必要的工具类抽取也很重要，这在以后的项目中是可以重用的。</p>
</li>
<li><p>可引入 <code>Dagger2</code> 减少模块之间的耦合性。<code>Dagger2</code> 是一个依赖注入框架，使用代码自动生成创建依赖关系需要的代码。减少很多模板化的代码，更易于测试，降低耦合，创建可复用可互换的模块；</p>
</li>
<li><p>项目引入 <code>RxAndroid</code> 响应式编程，可以极大的减少逻辑代码；</p>
</li>
<li><p>通过引入事件总线，如：<code>EventBus</code>、<code>AndroidEventBus</code>、<code>RxBus</code>，它允许我们在 <code>DataLayer</code> 中发送事件，以便 <code>ViewLayer</code> 中的多个组件都能够订阅到这些事件，减少回调；</p>
</li>
<li><p>尽可能使用局部变量；</p>
</li>
<li><p>及时关闭流；</p>
</li>
<li><p>尽量减少对变量的重复计算；</p>
</li>
</ol>
<p>如下面的操作：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">      ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>建议替换为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, len = list.size(); i &lt; len; i++) &#123;</span><br><span class="line">      ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>尽量采用懒加载的策略，即在需要的时候才创建；</li>
</ol>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="string">"aaa"</span>;</span><br><span class="line"><span class="keyword">if</span> (i == <span class="number">1</span>) &#123;</span><br><span class="line">      list.add(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>建议替换为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (i == <span class="number">1</span>) &#123;</span><br><span class="line">      String str = <span class="string">"aaa"</span>;</span><br><span class="line">      list.add(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><p>不要在循环中使用 <code>try…catch…</code>，应该把其放在最外层；</p>
</li>
<li><p>使用带缓冲的输入输出流进行 IO 操作；</p>
</li>
<li><p>尽量使用 <code>HashMap</code>、<code>ArrayList</code>、<code>StringBuilder</code>，除非线程安全需要，否则不推荐使用 <code>HashTable</code>、<code>Vector</code>、<code>StringBuffer</code>，后三者由于使用同步机制而导致了性能开销；</p>
</li>
<li><p>尽量在合适的场合使用单例；</p>
<p>使用单例可以减轻加载的负担、缩短加载的时间、提高加载的效率，但并不是所有地方都适用于单例，简单来说，单例主要适用于以下三个方面：</p>
<ol>
<li><p>控制资源的使用，通过线程同步来控制资源的并发访问。</p>
</li>
<li><p>控制实例的产生，以达到节约资源的目的。</p>
</li>
<li><p>控制数据的共享，在不建立直接关联的条件下，让多个不相关的进程或线程之间实现通信。</p>
</li>
</ol>
</li>
<li><p>把一个基本数据类型转为字符串，<code>基本数据类型.toString()</code> 是最快的方式，<code>String.valueOf(数据)</code> 次之，<code>数据 + &quot;&quot;</code> 最慢；</p>
</li>
<li><p>使用 AS 自带的 Lint 来优化代码结构（什么，你不会？右键 module、目录或者文件，选择 Analyze -&gt; Inspect Code）；</p>
</li>
<li><p>最后不要忘了内存泄漏的检测；</p>
</li>
</ol>
<hr>
<p>最后啰嗦几句：</p>
<ul>
<li>好的命名规则能够提高代码质量，使得新人加入项目的时候降低理解代码的难度；</li>
<li>规矩终究是死的，适合团队的才是最好的；</li>
<li>命名规范需要团队一起齐心协力来维护执行，在团队生活里，谁都不可能独善其身；</li>
<li>一开始可能会有些不习惯，持之以恒，总会成功的。</li>
</ul>
<h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><h3 id="UI-控件缩写表"><a href="#UI-控件缩写表" class="headerlink" title="UI 控件缩写表"></a>UI 控件缩写表</h3><table>
<thead>
<tr>
<th>名称</th>
<th>缩写</th>
</tr>
</thead>
<tbody>
<tr>
<td>Button</td>
<td>btn</td>
</tr>
<tr>
<td>CheckBox</td>
<td>cb</td>
</tr>
<tr>
<td>EditText</td>
<td>et</td>
</tr>
<tr>
<td>FrameLayout</td>
<td>fl</td>
</tr>
<tr>
<td>GridView</td>
<td>gv</td>
</tr>
<tr>
<td>ImageButton</td>
<td>ib</td>
</tr>
<tr>
<td>ImageView</td>
<td>iv</td>
</tr>
<tr>
<td>LinearLayout</td>
<td>ll</td>
</tr>
<tr>
<td>ListView</td>
<td>lv</td>
</tr>
<tr>
<td>ProgressBar</td>
<td>pb</td>
</tr>
<tr>
<td>RadioButtion</td>
<td>rb</td>
</tr>
<tr>
<td>RecyclerView</td>
<td>rv</td>
</tr>
<tr>
<td>RelativeLayout</td>
<td>rl</td>
</tr>
<tr>
<td>ScrollView</td>
<td>sv</td>
</tr>
<tr>
<td>SeekBar</td>
<td>sb</td>
</tr>
<tr>
<td>Spinner</td>
<td>spn</td>
</tr>
<tr>
<td>TextView</td>
<td>tv</td>
</tr>
<tr>
<td>ToggleButton</td>
<td>tb</td>
</tr>
<tr>
<td>VideoView</td>
<td>vv</td>
</tr>
<tr>
<td>WebView</td>
<td>wv</td>
</tr>
</tbody>
</table>
<h3 id="常见的英文单词缩写表"><a href="#常见的英文单词缩写表" class="headerlink" title="常见的英文单词缩写表"></a>常见的英文单词缩写表</h3><table>
<thead>
<tr>
<th>名称</th>
<th>缩写</th>
</tr>
</thead>
<tbody>
<tr>
<td>average</td>
<td>avg</td>
</tr>
<tr>
<td>background</td>
<td>bg（主要用于布局和子布局的背景）</td>
</tr>
<tr>
<td>buffer</td>
<td>buf</td>
</tr>
<tr>
<td>control</td>
<td>ctrl</td>
</tr>
<tr>
<td>current</td>
<td>cur</td>
</tr>
<tr>
<td>default</td>
<td>def</td>
</tr>
<tr>
<td>delete</td>
<td>del</td>
</tr>
<tr>
<td>document</td>
<td>doc</td>
</tr>
<tr>
<td>error</td>
<td>err</td>
</tr>
<tr>
<td>escape</td>
<td>esc</td>
</tr>
<tr>
<td>icon</td>
<td>ic（主要用在 App 的图标）</td>
</tr>
<tr>
<td>increment</td>
<td>inc</td>
</tr>
<tr>
<td>information</td>
<td>info</td>
</tr>
<tr>
<td>initial</td>
<td>init</td>
</tr>
<tr>
<td>image</td>
<td>img</td>
</tr>
<tr>
<td>Internationalization</td>
<td>I18N</td>
</tr>
<tr>
<td>length</td>
<td>len</td>
</tr>
<tr>
<td>library</td>
<td>lib</td>
</tr>
<tr>
<td>message</td>
<td>msg</td>
</tr>
<tr>
<td>password</td>
<td>pwd</td>
</tr>
<tr>
<td>position</td>
<td>pos</td>
</tr>
<tr>
<td>previous</td>
<td>pre</td>
</tr>
<tr>
<td>selector</td>
<td>sel（主要用于某一 view 多种状态，不仅包括 ListView 中的 selector，还包括按钮的 selector）</td>
</tr>
<tr>
<td>server</td>
<td>srv</td>
</tr>
<tr>
<td>string</td>
<td>str</td>
</tr>
<tr>
<td>temporary</td>
<td>tmp</td>
</tr>
<tr>
<td>window</td>
<td>win</td>
</tr>
</tbody>
</table>
<p>程序中使用单词缩写原则：不要用缩写，除非该缩写是约定俗成的。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><p><a href="http://www.ayqy.net/blog/android%E5%8C%85%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83/" target="_blank" rel="noopener"><strong><font color="#69f">Android 包命名规范</font></strong></a></p>
</li>
<li><p><a href="https://github.com/futurice/android-best-practices/blob/master/translations/Chinese/README.cn.md" target="_blank" rel="noopener"><strong><font color="#69f">Android 开发最佳实践</font></strong></a></p>
</li>
<li><p><a href="https://www.jianshu.com/p/0a984f999592" target="_blank" rel="noopener"><strong><font color="#69f">Android 编码规范</font></strong></a></p>
</li>
<li><p><a href="https://github.com/alibaba/p3c/blob/master/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4Java%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C%EF%BC%88%E7%BA%AA%E5%BF%B5%E7%89%88%EF%BC%89.pdf" target="_blank" rel="noopener"><strong><font color="#69f">阿里巴巴 Java 开发手册</font></strong></a></p>
</li>
<li><p><a href="https://github.com/ribot/android-guidelines/blob/master/project_and_code_guidelines.md" target="_blank" rel="noopener"><strong><font color="#69f">Project and code style guidelines</font></strong></a></p>
</li>
<li><p><a href="http://www.hawstein.com/posts/google-java-style.html" target="_blank" rel="noopener"><strong><font color="#69f">Google Java 编程风格指南</font></strong></a></p>
</li>
<li><p><a href="https://www.jianshu.com/p/436943216526" target="_blank" rel="noopener"><strong><font color="#69f">小细节，大用途，35 个 Java 代码性能优化总结！</font></strong></a></p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/11/Android的-so文件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JamesWong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JamesWong's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/11/Android的-so文件/" itemprop="url">Android的.so文件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-11T17:05:25+08:00">
                2018-01-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="今日概要"><a href="#今日概要" class="headerlink" title="今日概要"></a>今日概要</h2><ol>
<li><strong>Android的.so文件、ABI和CPU的关系</strong></li>
<li><strong>B</strong></li>
<li><strong>C</strong></li>
</ol>
<hr>
<h3 id="Android的-so文件"><a href="#Android的-so文件" class="headerlink" title="Android的.so文件"></a>Android的.so文件</h3><p>早期的Android系统几乎只支持ARMv5的CPU架构，你知道现在它支持多少种吗？7种！</p>
<p>Android系统目前支持以下七种不同的CPU架构：ARMv5，ARMv7 (从2010年起)，x86 (从2011年起)，MIPS (从2012年起)，ARMv8，MIPS64和x86_64 (从2014年起)，每一种都关联着一个相应的ABI。</p>
<p>应用程序二进制接口（Application Binary Interface）定义了二进制文件（尤其是.so文件）如何运行在相应的系统平台上，从使用的指令集，内存对齐到可用的系统函数库。在Android系统上，每一个CPU架构对应一个ABI：armeabi，armeabi-v7a，x86，mips，arm64-v8a，mips64，x86_64。</p>
<h4 id="为什么你需要重点关注-so文件"><a href="#为什么你需要重点关注-so文件" class="headerlink" title="为什么你需要重点关注.so文件"></a>为什么你需要重点关注.so文件</h4><p>如果项目中使用到了NDK，它将会生成.so文件，因此显然你已经在关注它了。如果只是使用Java语言进行编码，你可能在想不需要关注.so文件了吧，因为Java是跨平台的。但事实上，即使你在项目中只是使用Java语言，很多情况下，你可能并没有意识到项目中依赖的函数库或者引擎库里面已经嵌入了.so文件，并依赖于不同的ABI。</p>
<p>例如，项目中使用RenderScript支持库，OpenCV，Unity，android-gif-drawable，SQLCipher等，你都已经在生成的APK文件中包含.so文件了，而你需要关注.so文件。</p>
<p>Android应用支持的ABI取决于APK中位于lib/ABI目录中的.so文件，其中ABI可能是上面说过的七种ABI中的一种。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/191937-caeb25d4ab0df30d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt=""></p>
<p><a href="https://link.jianshu.com/?t=https://play.google.com/store/apps/details?id=com.xh.nativelibsmonitor.app" target="_blank" rel="noopener">Native Libs Monitor</a> 这个应用可以帮助我们理解手机上安装的APK用到了哪些.so文件，以及.so文件来源于哪些函数库或者框架。</p>
<blockquote>
<p>当然，我们也可以自己对app反编译来获取这些信息，不过相对麻烦一些。</p>
</blockquote>
<p>很多设备都支持多于一种的ABI。例如ARM64和x86设备也可以同时运行armeabi-v7a和armeabi的二进制包。但最好是针对特定平台提供相应平台的二进制包，这种情况下运行时就少了一个模拟层（例如x86设备上模拟arm的虚拟层），从而得到更好的性能（归功于最近的架构更新，例如硬件fpu，更多的寄存器，更好的向量化等）。</p>
<p>我们可以通过Build.SUPPORTED_ABIS得到根据偏好排序的设备支持的ABI列表。但你不应该从你的应用程序中读取它，因为Android包管理器安装APK时，会自动选择APK包中为对应系统ABI预编译好的.so文件，如果在对应的lib／ABI目录中存在.so文件的话。</p>
<h4 id="App中可能出错的地方"><a href="#App中可能出错的地方" class="headerlink" title="App中可能出错的地方"></a>App中可能出错的地方</h4><p>处理.so文件时有一条简单却并不知名的重要法则。</p>
<p>你应该尽可能的提供专为每个ABI优化过的.so文件，但要么全部支持，要么都不支持：你不应该混合着使用。你应该为每个ABI目录提供对应的.so文件。</p>
<p>当一个应用安装在设备上，只有该设备支持的CPU架构对应的.so文件会被安装。在x86设备上，libs/x86目录中如果存在.so文件的话，会被安装，如果不存在，则会选择armeabi-v7a中的.so文件，如果也不存在，则选择armeabi目录中的.so文件（因为x86设备也支持armeabi-v7a和armeabi）。</p>
<h4 id="其他地方也可能出错"><a href="#其他地方也可能出错" class="headerlink" title="其他地方也可能出错"></a>其他地方也可能出错</h4><p>当你引入一个.so文件时，不止影响到CPU架构。我从其他开发者那里可以看到一系列常见的错误，其中最多的是”UnsatisfiedLinkError”，”dlopen: failed”以及其他类型的crash或者低下的性能：</p>
<h4 id="使用android-21平台版本编译的-so文件运行在android-15的设备上"><a href="#使用android-21平台版本编译的-so文件运行在android-15的设备上" class="headerlink" title="使用android-21平台版本编译的.so文件运行在android-15的设备上"></a>使用android-21平台版本编译的.so文件运行在android-15的设备上</h4><p>使用NDK时，你可能会倾向于使用最新的编译平台，但事实上这是错误的，因为NDK平台不是后向兼容的，而是前向兼容的。推荐使用app的minSdkVersion对应的编译平台。</p>
<p>这也意味着当你引入一个预编译好的.so文件时，你需要检查它被编译所用的平台版本。</p>
<h4 id="混合使用不同C-运行时编译的-so文件"><a href="#混合使用不同C-运行时编译的-so文件" class="headerlink" title="混合使用不同C++运行时编译的.so文件"></a>混合使用不同C++运行时编译的.so文件</h4><p>.so文件可以依赖于不同的C++运行时，静态编译或者动态加载。混合使用不同版本的C++运行时可能导致很多奇怪的crash，是应该避免的。作为一个经验法则，当只有一个.so文件时，静态编译C++运行时是没问题的，否则当存在多个.so文件时，应该让所有的.so文件都动态链接相同的C++运行时。</p>
<p>这意味着当引入一个新的预编译.so文件，而且项目中还存在其他的.so文件时，我们需要首先确认新引入的.so文件使用的C++运行时是否和已经存在的.so文件一致。</p>
<h4 id="没有为每个支持的CPU架构提供对应的-so文件"><a href="#没有为每个支持的CPU架构提供对应的-so文件" class="headerlink" title="没有为每个支持的CPU架构提供对应的.so文件"></a>没有为每个支持的CPU架构提供对应的.so文件</h4><p>这一点在前文已经说到了，但你应该真的特别注意它，因为它可能发生在根本没有意识到的情况下。</p>
<p>例如：你的app支持armeabi-v7a和x86架构，然后使用Android Studio新增了一个函数库依赖，这个函数库包含.so文件并支持更多的CPU架构，例如新增android-gif-drawable函数库：</p>
<p><code>compile ‘pl.droidsonroids.gif:android-gif-drawable:1.1.+’</code></p>
<p>发布我们的app后，会发现它在某些设备上会发生Crash，例如Galaxy S6，最终可以发现只有64位目录下的.so文件被安装进手机。</p>
<p>解决方案：重新编译我们的.so文件使其支持缺失的ABIs，或者设置</p>
<p><code>ndk.abiFilters</code></p>
<p>显示指定支持的ABIs。</p>
<p>最后一点：<strong>如果你是一个SDK提供者，但提供的函数库不支持所有的ABIs，那你将会搞砸你的用户，因为他们能支持的ABIs必将只能少于你提供的。</strong></p>
<h4 id="将-so文件放在错误的地方"><a href="#将-so文件放在错误的地方" class="headerlink" title="将.so文件放在错误的地方"></a>将.so文件放在错误的地方</h4><p>我们往往很容易对.so文件应该放在或者生成到哪里感到困惑，下面是一个总结：</p>
<ul>
<li>Android Studio工程放在jniLibs/ABI目录中（当然也可以通过在build.gradle文件中的设置jniLibs.srcDir属性自己指定）</li>
<li>Eclipse工程放在libs/ABI目录中（这也是ndk-build命令默认生成.so文件的目录）</li>
<li>AAR压缩包中位于jni/ABI目录中（.so文件会自动包含到引用AAR压缩包的APK中）</li>
<li>最终APK文件中的lib/ABI目录中</li>
<li>通过PackageManager安装后，在小于Android 5.0的系统中，.so文件位于app的nativeLibraryPath目录中；在大于等于Android 5.0的系统中，.so文件位于app的nativeLibraryRootDir/CPU_ARCH目录中。</li>
</ul>
<h4 id="只提供armeabi架构的-so文件而忽略其他ABIs的"><a href="#只提供armeabi架构的-so文件而忽略其他ABIs的" class="headerlink" title="只提供armeabi架构的.so文件而忽略其他ABIs的"></a>只提供armeabi架构的.so文件而忽略其他ABIs的</h4><p>所有的x86/x86_64/armeabi-v7a/arm64-v8a设备都支持armeabi架构的.so文件，因此似乎移除其他ABIs的.so文件是一个减少APK大小的好技巧。但事实上并不是：这不只影响到函数库的性能和兼容性。</p>
<p>x86设备能够很好的运行ARM类型函数库，但并不保证100%不发生crash，特别是对旧设备。64位设备（arm64-v8a, x86_64, mips64）能够运行32位的函数库，但是以32位模式运行，在64位平台上运行32位版本的ART和Android组件，将丢失专为64位优化过的性能（ART，webview，media等等）。</p>
<p>以减少APK包大小为由是一个错误的借口，因为你也可以选择在应用市场上传指定ABI版本的APK，生成不同ABI版本的APK可以在build.gradle中如下配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    ... </span><br><span class="line">    splits &#123;</span><br><span class="line">        abi &#123;</span><br><span class="line">            enable true</span><br><span class="line">            reset()</span><br><span class="line">            include &apos;x86&apos;, &apos;x86_64&apos;, &apos;armeabi-v7a&apos;, &apos;arm64-v8a&apos; //select ABIs to build APKs for</span><br><span class="line">            universalApk true //generate an additional APK that contains all the ABIs</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    // map for the version code</span><br><span class="line">    project.ext.versionCodes = [&apos;armeabi&apos;: 1, &apos;armeabi-v7a&apos;: 2, &apos;arm64-v8a&apos;: 3, &apos;mips&apos;: 5, &apos;mips64&apos;: 6, &apos;x86&apos;: 8, &apos;x86_64&apos;: 9]</span><br><span class="line"> </span><br><span class="line">    android.applicationVariants.all &#123; variant -&gt;</span><br><span class="line">        // assign different version code for each output</span><br><span class="line">        variant.outputs.each &#123; output -&gt;</span><br><span class="line">            output.versionCodeOverride =</span><br><span class="line">                    project.ext.versionCodes.get(output.getFilter(com.android.build.OutputFile.ABI), 0) * 1000000 + android.defaultConfig.versionCode</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考：<a href="https://www.jianshu.com/p/cb05698a1968" target="_blank" rel="noopener">https://www.jianshu.com/p/cb05698a1968</a></p>
</blockquote>
<hr>
<h3 id="da"><a href="#da" class="headerlink" title="da"></a>da</h3><hr>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ol>
<li><a href="https://apps.evozi.com/apk-downloader/?id=com.xh.nativelibsmonitor.app" target="_blank" rel="noopener">APK Downloader</a> : 便捷下载 Google Play 应用,输入 Google Play 的 App 网址即可下载</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/10/MySql基本语法及存储过程学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JamesWong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JamesWong's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/10/MySql基本语法及存储过程学习/" itemprop="url">MySql基本语法及存储过程学习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-10T10:00:40+08:00">
                2018-01-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="今日概要"><a href="#今日概要" class="headerlink" title="今日概要"></a>今日概要</h2><ol>
<li><strong>MySql 基本语法学习</strong></li>
<li><strong>MySql 存储过程</strong></li>
<li><strong>WebView 嵌入 JavaScript 代码</strong></li>
<li><strong>WebView 修改 UserAgent</strong></li>
<li><strong>X5 访问外链的坑</strong></li>
<li><strong>Kotlin 正则表达式</strong></li>
</ol>
<hr>
<h3 id="MySql-基本语法学习"><a href="#MySql-基本语法学习" class="headerlink" title="MySql 基本语法学习"></a><a href="http://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener">MySql 基本语法学习</a></h3><h4 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h4><ul>
<li>数据库的连接</li>
<li>数据库里的信息</li>
<li>查看数据库信息</li>
<li>调用存储过程</li>
</ul>
<h4 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h4><h5 id="数据库的连接"><a href="#数据库的连接" class="headerlink" title="数据库的连接"></a>数据库的连接</h5><p>连接 MySQL 时需要提供 IP 地址、端口号、用户名、密码；</p>
<p>根据业务需求给该连接起个连接名称。</p>
<h5 id="数据库里的信息"><a href="#数据库里的信息" class="headerlink" title="数据库里的信息"></a>数据库里的信息</h5><p>数据库里信息只需要关注数据表、函数（存储过程）、查询。</p>
<ul>
<li>数据表：项目中使用的业务数据存储的地方</li>
<li>函数（存储过程）：常用查询代码的整理</li>
<li>查询：每天都会重复写的查询代码，可以保存在这里，不必须重复敲码</li>
</ul>
<h5 id="数据表"><a href="#数据表" class="headerlink" title="数据表"></a>数据表</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 创建数据表</span><br><span class="line">create table</span><br></pre></td></tr></table></figure>
<h5 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h5><p>没有参数时，直接调用存储过程名称：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">call pro_version</span><br></pre></td></tr></table></figure>
<p>需要传参数时：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">call pro_query_app_report_etl(9903, 3)</span><br></pre></td></tr></table></figure>
<p>《调试文档 - 报表刷新状态》</p>
<p>查看存储过程需要传的参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create procedure pro_query_app_report_etl</span><br></pre></td></tr></table></figure>
<p>把 create procedure 字段的内存拷贝出来就可以看到存储过程的定义，及参数的定义。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE DEFINER=`shengyiplus`@`%` PROCEDURE </span><br><span class="line">`pro_query_app_report_etl`</span><br><span class="line">(in var_report_id varchar(50),in var_day varchar(50))</span><br><span class="line">...</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>返回结果，存储过程中 <code>select</code> 的结果集就是返回的结果。</p>
<h4 id="接口调用"><a href="#接口调用" class="headerlink" title="接口调用"></a>接口调用</h4><ol>
<li>实现存储过程</li>
<li>通过调用接口，把存储过程名称作为参数传入</li>
<li>通过接口获取存储过程执行的结果</li>
</ol>
<h5 id="实现存储过程"><a href="#实现存储过程" class="headerlink" title="实现存储过程"></a>实现存储过程</h5><p>如上</p>
<h5 id="通过调用接口，把存储过程名称作为参数传入"><a href="#通过调用接口，把存储过程名称作为参数传入" class="headerlink" title="通过调用接口，把存储过程名称作为参数传入"></a>通过调用接口，把存储过程名称作为参数传入</h5><p>存储过程若无参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get /api/v2/procedure/data?api_token=288d848d3bdf31ec764e2af72669bb90&amp;procedure=shengyiplus_s.pro_manage_expense_p1&amp;ordered_params</span><br></pre></td></tr></table></figure>
<p>有参数时使用 <code>ordered_params=one@two&amp;one=1&amp;two=2</code></p>
<ul>
<li>ordered_params 决定了参数的数量及顺序</li>
<li>后面给 ordered_params 中的参数赋值，若无则赋值为空</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get /api/v2/procedure/data?api_token=288d848d3bdf31ec764e2af72669bb90&amp;procedure= shengyiplus_s.pro_manage_expense_chart&amp;ordered_params=month@city&amp;month=201711&amp;city=深圳市</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="MySql存储过程"><a href="#MySql存储过程" class="headerlink" title="MySql存储过程"></a><a href="http://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener">MySql存储过程</a></h3><h4 id="delimiter"><a href="#delimiter" class="headerlink" title="delimiter"></a>delimiter</h4><p>delimiter 告诉 mysql 解释器，该段命令是否已结束。</p>
<p>默认情况下，delimiter 是分号 ;</p>
<p>在命令行客户端中，如果有一行命令以分号结束，那么回车后，mysql 将会执行该命令。</p>
<p>输入下面的语句:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msyql&gt; select * from test_table;</span><br></pre></td></tr></table></figure>
<p>然后回车，那么 mysql 会立即执行该语句。</p>
<p>但有时候，不希望 mysql 这么做，可能输入较多的语句，且语句中包含有分号。</p>
<p>如试图在命令行客户端中输入如下语句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">drop procedure if exists pr_param_in;</span><br><span class="line">create procedure pr_param_in(in id int)</span><br><span class="line">begin</span><br><span class="line">    if (id is not null) then</span><br><span class="line">        set id = id + 1;</span><br><span class="line">    end if;</span><br><span class="line"></span><br><span class="line">    select id as id_inner;</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>
<p>默认情况下，不可能等到用户把这些语句全部输入完之后，再执行整段语句。</p>
<p>因为 MySQL 一遇到分号，它就要自动执行。</p>
<p>这种情况下，就需要事先把 delimiter 换成其它符号，如 ;;</p>
<p>这样只有当 ;; 出现之后，MySQL 解释器才会执行这段语句</p>
<p>完整的示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">drop procedure if exists pr_param_in;</span><br><span class="line"></span><br><span class="line">delimiter ;; -- 声明以 ;; 作为结束符告诉 mysql 已可以运行</span><br><span class="line"></span><br><span class="line">create procedure pr_param_in(in id int)</span><br><span class="line">begin</span><br><span class="line">    if (id is not null) then</span><br><span class="line">        set id = id + 1;</span><br><span class="line">    end if;</span><br><span class="line"></span><br><span class="line">    select id as id_inner;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">;; -- 告诉 mysql 可以执行上述代码</span><br><span class="line"></span><br><span class="line">delimiter ; -- 恢复结束符</span><br></pre></td></tr></table></figure>
<h4 id="存储过程-1"><a href="#存储过程-1" class="headerlink" title="存储过程"></a>存储过程</h4><p>一组 sql 语句集，功能强大，可以实现一些比较复杂的逻辑功能；</p>
<p>存储过程跟触发器有点类似，都是一组 sql 集，但是存储过程是主动调用的，且功能比触发器更加强大，触发器是某件事触发后自动调用；</p>
<p><strong>每句 sql 记得在行尾加分号</strong></p>
<p>基本语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">drop procedure if exists `proc_if`;</span><br><span class="line">delimiter ;;</span><br><span class="line">create definer=`root`@`localhost` procedure `proc_if`</span><br><span class="line">begin</span><br><span class="line">end</span><br><span class="line">;;</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>
<ul>
<li>delimiter ;;：之前说过了，把默认的输入的结束符;替换成;;。</li>
<li>definer：创建者；</li>
</ul>
<h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><p>三种定义方式：</p>
<ol>
<li>declare</li>
</ol>
<p>这种方式定义的变量，语句的位置必须在begin下,同时要带上参数类型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">declare tname varchar(50);</span><br></pre></td></tr></table></figure>
<ol>
<li>set</li>
</ol>
<p>这种方式定义的变量，定义同时赋值，语句的位置可以任意出现，不需要带上参数类型，但定义的变量是会话变量，如果想定义局部变量，那么变量名加上’@’。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set @aa=&apos;xxx&apos;;</span><br></pre></td></tr></table></figure>
<ol>
<li>select</li>
</ol>
<p>性质同上一个set，但是这个可以通过插询记录去赋值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set @var=(select cnm from tbnm);</span><br><span class="line">select @var=cnm from tbnm;</span><br></pre></td></tr></table></figure>
<h4 id="prepare"><a href="#prepare" class="headerlink" title="prepare"></a>prepare</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">prepare statement_name from sql_text /*定义*/   </span><br><span class="line">execute statement_name [using variable [,variable...]] /*执行预处理语句*/   </span><br><span class="line">deallocate prepare statement_name /*删除定义*/</span><br></pre></td></tr></table></figure>
<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p>更新所有数据表的字符串为 utf8</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">begin  </span><br><span class="line">    declare done boolean default 0;</span><br><span class="line">    declare tbl_name varchar(255);  </span><br><span class="line">  </span><br><span class="line">    declare t_index cursor for select ist.table_name from information_schema.tables as ist where ist.table_schema = &apos;shengyiplus_pro&apos; and ist.table_type = &apos;base table&apos;;</span><br><span class="line">    declare continue handler for sqlstate &apos;02000&apos; set done = 1;  </span><br><span class="line">  </span><br><span class="line">open t_index;  </span><br><span class="line">repeat  </span><br><span class="line">        fetch t_index into tbl_name;  </span><br><span class="line">        set @sql = concat(&apos;alter table &apos;, tbl_name, &apos; convert to character set utf8;&apos;);</span><br><span class="line"></span><br><span class="line">        prepare stmt from @sql; -- 定义</span><br><span class="line">        execute stmt;           -- 执行</span><br><span class="line">        deallocate prepare stmt;-- 释放</span><br><span class="line"></span><br><span class="line">until done end repeat;  </span><br><span class="line">close t_index;  </span><br><span class="line">  </span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h4 id="存储过程列表"><a href="#存储过程列表" class="headerlink" title="存储过程列表"></a>存储过程列表</h4><p>方法一：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show procedure status;</span><br></pre></td></tr></table></figure>
<p>方法二：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select </span><br><span class="line">  routine_schema as database_name</span><br><span class="line">  , routine_name as procedure_name</span><br><span class="line">from information_schema.routines </span><br><span class="line">where routine_schema = database()</span><br><span class="line">and routine_name like &apos;pro_%&apos;</span><br><span class="line">and routine_type = &apos;PROCEDURE&apos;</span><br><span class="line">order by routine_name asc</span><br></pre></td></tr></table></figure>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><ul>
<li><a href="http://www.cnblogs.com/chenpi/p/5136483.html" target="_blank" rel="noopener">mysql 中的存储过程</a></li>
<li><a href="http://www.cnblogs.com/colder/p/3142067.html" target="_blank" rel="noopener">mysql 存储过程之游标遍历数据表</a></li>
<li><a href="http://www.iteye.com/problems/100884" target="_blank" rel="noopener">mysql 存储过程执行动态sql的问题</a></li>
<li><a href="http://blog.csdn.net/luo4105/article/details/51501245" target="_blank" rel="noopener">mysql 存储过程—-三种定义变量方式</a></li>
<li><a href="http://blog.csdn.net/zhxp_870516/article/details/8531378" target="_blank" rel="noopener">mysql prepare语句使用</a></li>
<li><a href="http://blog.csdn.net/u010003835/article/details/50716610" target="_blank" rel="noopener">数据库_MySQL 游标的使用和结果集的遍历</a></li>
<li><a href="http://blog.csdn.net/k346k346/article/details/51892492" target="_blank" rel="noopener">MySQL 对 CREATE TABLE IF NOT EXISTS SELECT 的处理</a></li>
<li><a href="http://book.51cto.com/art/201012/240986.htm" target="_blank" rel="noopener">从 information_schema.Routines 表中查看存储过程和函数的信息</a></li>
</ul>
<hr>
<h2 id="WebView-嵌入-JavaScript-代码"><a href="#WebView-嵌入-JavaScript-代码" class="headerlink" title="WebView 嵌入 JavaScript 代码"></a>WebView 嵌入 JavaScript 代码</h2><ol>
<li>方法写在 WebView 的 WebViewClient 的 onPageFinished 方法中</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line"> public void onPageFinished(WebView view, String url) </span><br><span class="line">  &#123;</span><br><span class="line">       super.onPageFinished(view, url);</span><br><span class="line">        webview.loadUrl(&quot;javascript:(function()&#123;&quot; +</span><br><span class="line">                &quot;var objs=document.getElementsByTagName(\&quot;span\&quot;);&quot; +</span><br><span class="line">                &quot;for(var i=0;i&lt;objs.length;i++)&quot; +</span><br><span class="line">                &quot;&#123;&quot;</span><br><span class="line">                + &quot;      objs[i].onclick=function()  &quot; +</span><br><span class="line">                &quot;    &#123;   &quot;</span><br><span class="line">                + &quot;     window.authorlistener.openAuthor(this.getAttribute(&apos;data-author-id&apos;));     &quot; +</span><br><span class="line">                &quot; window.textlistener.openText(this.getAttribute(&apos;data-source-id&apos;)); &quot;+</span><br><span class="line">                &quot;    &#125;  &quot; +</span><br><span class="line">                &quot;&#125;&quot; +</span><br><span class="line">                &quot;&#125;)()&quot;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Kotlin-正则表达式"><a href="#Kotlin-正则表达式" class="headerlink" title="Kotlin 正则表达式"></a><a href="http://www.jb51.net/article/130009.htm" target="_blank" rel="noopener">Kotlin 正则表达式</a></h2><ol>
<li><p>替换 UserAgent 中的 Chrome 版本为最新</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">val userAgentWithNewChromeVersion = Regex(&quot;[Cc]hrome/[0-9.]*\\s+&quot;).replace(webSettings?.userAgentString!!, &quot;Chrome/57.0.2987.132 &quot;)</span><br><span class="line">webSettings.setUserAgent(userAgentWithNewChromeVersion)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ol>
<li>Linux Mint 学习安装<ul>
<li><a href="http://www.binarytides.com/better-linux-mint-17-cinnamon/" target="_blank" rel="noopener">安装Linux Mint 17后要做的20件事</a></li>
</ul>
</li>
<li><a href="https://stackoverflow.com/questions/19716840/handle-arrow-keys-from-d-pad-on-webview-google-tv-app" target="_blank" rel="noopener">Android Native 与 H5 适配 TV 遥控器按键</a></li>
<li>Q : 阿里云数据可视化网页打开提示”请尝试使用Chrome最新版本浏览”<ul>
<li>A : 查看网页源码，发现有一个浏览器检查的 <a href="https://cdn-service.datav.aliyun.com/datav-static/1.4.0_44/js/libs/browser-check.js" target="_blank" rel="noopener">js</a> ， js 使用了查看浏览器版本信息的 UserAgent 插件 <a href="https://github.com/faisalman/ua-parser-js" target="_blank" rel="noopener">UAParser</a> <a href="https://faisalman.github.io/ua-parser-js/" target="_blank" rel="noopener">测试连接</a> ，js 中通过插件获取浏览器信息，发现只支持 Chrome (主版本大于等50) 和 Safari(主版本大于等于10)</li>
<li>而我们的应用嵌入了 X5 内核浏览器，综上所诉三个坑<ol>
<li>设备在硬件上不支持 X5</li>
<li>js 没有判断腾讯的 X5 内核浏览器（既 MQQBrowser）</li>
<li>在把 UserAgent 中的 X5 信息去掉之后，依然有问题，<code>去掉 wv 会提示 Browser 为Android Browser ，再去掉 Version/4.0 之后 Browser 变为 Chrome</code><ul>
<li>Browser 为 Chrome WebView<br><code>Mozilla/5.0 (Linux; Android 6.0.1; SM919 Build/MXB48T; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.132 Mobile Safari/537.36</code></li>
<li>Browser 为 Chrome<br><code>Mozilla/5.0 (Linux; Android 6.0.1; SM919 Build/MXB48T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.97 Mobile Safari/537.36</code></li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/09/Android基础知识点整理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JamesWong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JamesWong's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/09/Android基础知识点整理/" itemprop="url">Android基础知识点整理(1)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-09T22:05:41+08:00">
                2018-01-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="基本技能"><a href="#基本技能" class="headerlink" title="基本技能"></a>基本技能</h2><ul>
<li>markdown语法<ul>
<li>附件</li>
</ul>
</li>
<li>git 基本语法<ul>
<li>附件</li>
</ul>
</li>
<li>基本命令行<ul>
<li>创建文件夹<br>  <code>mkdir test</code></li>
<li>进入文件夹<br>  <code>cd test</code></li>
<li>创建空文件<br>  <code>touch fileName</code></li>
<li>查看文本内容<br>  <code>cat xxx.txt</code></li>
<li>删除文件<br>  <code>rm xxx.txt</code><br>  <code>rm -rf file</code>// -fr表示递归和强制，一定要小心使用 rm -fr / 那你的电脑就over了</li>
<li>拷贝<br>  <code>cp -R 源文件  目标文件</code>// -R 表示对目录进行递归操作</li>
<li>移动<br>  <code>mv filePath toPath</code></li>
<li>显示当前目录的路径名<br>  在目录中执行<code>pwd</code>    </li>
<li>查看文件内容<br>  <code>cat fileName</code></li>
<li>清除命令行内容<br>  <code>clear</code></li>
<li>显示当前日期<br>  <code>date</code></li>
<li>显示文件列表<br>  <code>ls</code>// 显示未隐藏的文件<br>  <code>ls -a</code>// 显示所有文件<br>  <code>ls -A</code>// 显示除了’.’和’.’以外所有文件<br>  <code>ls -l</code>// 显示文件详细信息<br>  <code>ls -R</code>// 递归显示目录及其子目录文件内容</li>
<li>关机<br>  <code>sudo shutdown -h now</code>// -h 是关闭电源 now立即关机<br>  <code>sudo shutdown -r now</code>//重启<br>  <code>sudo shutdown -h -time 60</code>// 表示60分钟后关机，注意单位是分钟   </li>
</ul>
</li>
</ul>
<h2 id="基本工具"><a href="#基本工具" class="headerlink" title="基本工具"></a>基本工具</h2><h3 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h3><ul>
<li>android studio 快捷键<ul>
<li>附件</li>
</ul>
</li>
<li><p>activity 生命周期（这个图相当形象了）</p>
<ul>
<li><img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/basic-lifecycle-paused.png?raw=true" alt="image"></li>
<li><p>四种启动模式（进阶）</p>
<ol>
<li><p>standard : （standard 是系统默认的启动模式。）</p>
<ul>
<li>标准启动模式，每次激活 Activity 时都会创建 Activity ，并放入任务栈中。如果启动此 Activity 的 Intent 中没有设置 <code>FLAG_ACTIVITY_NEW_TASK</code> 标志, 则这个 Activity 与启动他的 Activity 在同一个 Task 中,如果设置了 Activity 请参考上面 <code>FLAG_ACTIVITY_NEW_TASK</code> 的详细说明,”launchMode”设置为”standard”的 Activity 可以被实例化多次, 可以在 Task 中的任何位置, 对于一个新的 Intent 请求就会实例化一次.</li>
</ul>
<ol>
<li><p>singleTop : </p>
<ul>
<li>如果在任务的栈顶正好存在该 Activity 的实例， 就重用该实例，而不会创建新的 Activity 对象，不过它会调用onNewIntent()方法。如果栈顶部不存在就会创建新的实例并放入栈顶(即使栈中已经存在该 Activity 实例，只要不在栈顶，都会创建实例)。如果启动此 Activit y的 Intent 中没有设置 <code>FLAG_ACTIVITY_NEW_TASK</code> 标志, 则这个 Activity 与启动他的 Activity 在同一个 Task 中,如果设置了 Activity 请参考上面 <code>FLAG_ACTIVITY_NEW_TASK</code> 的详细说明,”launchMode”设置为”singleTop”的 Activity 可以被实例化多次,  可以在 Task 中的任何位置, 对于一个新的 Intent 请求如果在 Task 栈顶, 则会用栈顶的 Activity 响影 Intent 请求,而不会重新实例化对象接收请求, 如果没有在栈顶, 则会实例化一个新的对象接收 Intent 请求.</li>
</ul>
</li>
<li><p>singleTask : </p>
<ul>
<li>如果在栈中已经有该 Activity 的实例，就重用该实例(会调用实例的 onNewIntent() )。重用时，会让该实例回到栈顶，因此在它上面的实例将会被移除栈。如果栈中不存在该实例，将会创建新的实例放入栈中。 和 singleTop 在名字上即可看出区别，即 singleTop 每次只检测当前栈顶的 Activity 是否是我们需要请求创建的，而 singleTask 则会检测栈中全部的 Activity 对象，从上向下，如果检测到是我们所请求的则会消灭此 Activity 对象上面的对象，直接把检测到的我们需要的 Activity 置为栈顶。”launchMode”设置为”singleTask”的 Activity 总是在栈底, 只能被实例化一次, 它允许其它 Activity 压入”singleTask”的 Activity 所在的 Task 栈,如果有新的 Intent 请求有此标志的 Activity , 则系统会清除有此标志的 Task 栈中的全部 Activity,并把此 Activity 显示出来.</li>
</ul>
</li>
<li><p>singleInstance : </p>
<ul>
<li>在一个新栈中创建该 Activity 实例，并让多个应用共享该 Activity 实例。一旦这种模式的 Activity 实例存在于某个栈中，任何应用再激活这个 Activity 时都会重用该栈中的实例，其效果相当于多个应用程序共享一个应用，不管谁激活该 Activity 都会进入同一个应用中。此启动模式和我们使用的浏览器工作原理类似，在多个程序中访问浏览器时，如果当前浏览器没有打开，则打开浏览器，否则会在当前打开的浏览器中访问。此模式会节省大量的系统资源，因为他能保证要请求的 Activity 对象在当前的栈中只存在一个。”launchMode”设置为”singleInstance”的 Activity 总是在栈底, 只能被实例化一次, 不允许其它的 Activity 压入”singleInstance”的 Activity 所在 Task 栈,  即整个 Task 栈中只能有这么一个 Activity .</li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>activity 间跳转</p>
<ol>
<li><p>action</p>
<pre><code>Intent intent = new Intent(); 
intent.setAction(&quot;com.intfocus.template.testactivity&quot;); 
……
startActivity(intent);

//在配置文件中注册Activity的时候需要声明：
&lt;activity android:name=&quot;com.intfocus.template.TestActivity&quot;&gt;
&lt;intent-filter&gt;
&lt;action android:name=&quot;com.intfocus.template.testactivity&quot; /&gt;
&lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;   
&lt;/intent-filter&gt;
&lt;/activity&gt;
</code></pre></li>
<li><p>类名</p>
<pre><code>Intent intent = new Intent(TestActivity.this,TargetActivity.class); 
……
startActivity(intent);
</code></pre></li>
<li><p>Uri</p>
<pre><code>Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;tel:13000000000&quot;));
……
startActivity(intent);
</code></pre></li>
</ol>
</li>
<li><p>webview 加载本地网页及与 js 交互</p>
<ul>
<li>WebView加载本地网页<ul>
<li>file:///android_asset/xxx.html</li>
</ul>
</li>
<li><p>WebView 与 Js 交互</p>
<ul>
<li><p>Android 调用 WebView 中的 js 脚本</p>
<pre><code>// 启用javascript        mWebView.getSettings().setJavaScriptEnabled(true);
// 加载web页面
mWebView.loadUrl(&quot;file:///android_asset/index.html&quot;);
// 调用js
mWebView.loadUrl(&quot;javascript:test(&apos;&quot; + aa+ &quot;&apos;)&quot;); //aa是js的函数test()的参数  
</code></pre></li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>- Js 调用 Android 中的方法

        public WebViewActivity extends Activity {

            public void onCreate() {
                // 启用javascript    
                mWebView.getSettings().setJavaScriptEnabled(true);
                // 加载web页面
                mWebView.loadUrl(&quot;file:///android_asset/index.html&quot;);
                // 首先要对webview绑定javascriptInterface，js脚本通过这个接口来调用java代码。javascriptInterface实际就是一个普通的java类，里面是我们本地实现的java代码， 将JavascriptInterface传递给webview，并指定别名，这样js脚本就可以通过我们给的这个别名来调用我们的方法,在这里，this是实例化的对象，wst是这个对象在js中的别名
                mWebView.addJavascriptInterface(this, &quot;index&quot;);
            }

            // js所调用的native方法的本地实现，安卓4.2及以上版本（API &gt;= 17），在注入类中为可调用的方法添加@JavascriptInterface注解，无注解的方法不能被调用，这种方式可以防范注入漏洞
            @JavascriptInterface
            public void startFunction(final String str) {  
                Toast.makeText(this, str, Toast.LENGTH_SHORT).show();  
                runOnUiThread(new Runnable() {  

                    @Override  
                    public void run() {  
                        msgView.setText(msgView.getText() + &quot;\njs调用了java函数传递参数：&quot; + str);  

                    }  
                });  
            }  
        }

         js 中通过如下代码调用即可  
        &lt;a onClick=&quot;window.wst.startFunction(&apos;hello world&apos;)&quot; &gt;点击调用java代码并传递参数&lt;/a&gt;  
</code></pre><ul>
<li>android 展示 pdf<ol>
<li>原生没有什么现有的好方法来实现 pdf 的展示，谷歌提供了一种 WebView 加载的方式，但是被墙体验很差<ul>
<li>webView.loadUrl(“<a href="http://docs.google.com/gview?embedded=true&amp;url=" target="_blank" rel="noopener">http://docs.google.com/gview?embedded=true&amp;url=</a>“ + pdfUrl); // </li>
</ul>
</li>
<li>下载 pdf 到本地，使用三方库来展示 <ul>
<li><a href="https://github.com/barteksc/AndroidPdfViewer" target="_blank" rel="noopener">传送门</a> ： 这个库支持的 pdf 格式较丰富，使用也很方便</li>
</ul>
</li>
</ol>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/04/2018-01-04-RxJava-Kotlin-Android-Profiler-Glide-Stetho-待整理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JamesWong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JamesWong's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/04/2018-01-04-RxJava-Kotlin-Android-Profiler-Glide-Stetho-待整理/" itemprop="url">RxJava Kotlin Android Profiler Glide Stetho 待整理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-04T10:00:40+08:00">
                2018-01-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="今日概要"><a href="#今日概要" class="headerlink" title="今日概要"></a>今日概要</h2><ol>
<li><strong>RxJava</strong></li>
<li><strong>Kotlin</strong></li>
<li><strong>Android Profiler</strong></li>
<li><strong>Glide</strong></li>
<li><strong>Stetho</strong></li>
</ol>
<h2 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h2><h3 id="GreenDao-3"><a href="#GreenDao-3" class="headerlink" title="GreenDao 3"></a><a href="https://www.jianshu.com/p/4e6d72e7f57a" target="_blank" rel="noopener">GreenDao 3</a></h3><ul>
<li><a href="https://link.jianshu.com/?t=https://github.com/greenrobot/greenDAO" target="_blank" rel="noopener">Github</a></li>
<li><a href="https://link.jianshu.com/?t=http://greenrobot.org/greendao/" target="_blank" rel="noopener">官网</a></li>
</ul>
<hr>
<h3 id="RxJava"><a href="#RxJava" class="headerlink" title="RxJava"></a>RxJava</h3><ol>
<li>线程控制实现原理</li>
</ol>
<hr>
<h3 id="Kotlin"><a href="#Kotlin" class="headerlink" title="Kotlin"></a>Kotlin</h3><ol>
<li>xiecheng</li>
</ol>
<hr>
<h3 id="Android-Profiler"><a href="#Android-Profiler" class="headerlink" title="Android Profiler"></a>Android Profiler</h3><hr>
<h3 id="Glide"><a href="#Glide" class="headerlink" title="Glide"></a><a href="https://github.com/bumptech/glide" target="_blank" rel="noopener">Glide</a></h3><hr>
<h3 id="Stetho"><a href="#Stetho" class="headerlink" title="Stetho"></a><a href="https://github.com/facebook/stetho" target="_blank" rel="noopener">Stetho</a></h3><hr>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>1. </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">JamesWong</p>
              <p class="site-description motion-element" itemprop="description">简单即快乐。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">83</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JamesWong</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
